
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/es/practical-sessions/data-conversion-tools/">
      
      
        <link rel="prev" href="../ingesting-data-for-publication/">
      
      
        <link rel="next" href="../csv2bufr-templates/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Herramientas de Conversión de Datos - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#herramientas-de-conversion-de-datos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Herramientas de Conversión de Datos
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/data-conversion-tools/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/practical-sessions/data-conversion-tools/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/data-conversion-tools/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/data-conversion-tools/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/data-conversion-tools/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hojas de referencia
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Hojas de referencia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Plantillas csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Plantillas csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantilla DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sesiones Prácticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sesiones Prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conexión a WIS2 mediante MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accediendo a tu VM de estudiante
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicializando wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de conjuntos de datos en wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de metadatos de estaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestando datos para su publicación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Herramientas de Conversión de Datos
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Herramientas de Conversión de Datos
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introducción">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sobre-fm-12-synop" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre FM-12 SYNOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sobre-eccodes" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre ecCodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sobre-csv2bufr-y-synop2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre csv2bufr y synop2bufr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparacion" class="md-nav__link">
    <span class="md-ellipsis">
      Preparación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#herramientas-de-linea-de-comandos-de-eccodes" class="md-nav__link">
    <span class="md-ellipsis">
      Herramientas de línea de comandos de ecCodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Herramientas de línea de comandos de ecCodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bufr_ls" class="md-nav__link">
    <span class="md-ellipsis">
      bufr_ls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bufr_dump" class="md-nav__link">
    <span class="md-ellipsis">
      bufr_dump
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-de-synop2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Conversión de synop2bufr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversión de synop2bufr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#revisar-el-mensaje-synop-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar el mensaje SYNOP de ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revisar-la-lista-de-estaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar la lista de estaciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convertir-synop-a-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Convertir SYNOP a BUFR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formulario-synop-en-wis2box-webapp" class="md-nav__link">
    <span class="md-ellipsis">
      Formulario SYNOP en wis2box-webapp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-csv2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Conversión csv2bufr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversión csv2bufr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#revisar-el-archivo-csv-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar el archivo CSV de ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revisar-la-plantilla-aws-template" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar la plantilla aws-template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convertir-csv-a-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      convertir CSV a BUFR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plantillas de mapeo de CSV a BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Añadiendo encabezados GTS a las notificaciones WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuración de un conjunto de datos recomendado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descargando datos de WIS2 usando wis2downloader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoding-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decodificación de datos desde formatos binarios de la OMM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descubriendo conjuntos de datos del WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introducción">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sobre-fm-12-synop" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre FM-12 SYNOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sobre-eccodes" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre ecCodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sobre-csv2bufr-y-synop2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Sobre csv2bufr y synop2bufr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparacion" class="md-nav__link">
    <span class="md-ellipsis">
      Preparación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#herramientas-de-linea-de-comandos-de-eccodes" class="md-nav__link">
    <span class="md-ellipsis">
      Herramientas de línea de comandos de ecCodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Herramientas de línea de comandos de ecCodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bufr_ls" class="md-nav__link">
    <span class="md-ellipsis">
      bufr_ls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bufr_dump" class="md-nav__link">
    <span class="md-ellipsis">
      bufr_dump
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-de-synop2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Conversión de synop2bufr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversión de synop2bufr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#revisar-el-mensaje-synop-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar el mensaje SYNOP de ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revisar-la-lista-de-estaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar la lista de estaciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convertir-synop-a-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Convertir SYNOP a BUFR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formulario-synop-en-wis2box-webapp" class="md-nav__link">
    <span class="md-ellipsis">
      Formulario SYNOP en wis2box-webapp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-csv2bufr" class="md-nav__link">
    <span class="md-ellipsis">
      Conversión csv2bufr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conversión csv2bufr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#revisar-el-archivo-csv-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar el archivo CSV de ejemplo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revisar-la-plantilla-aws-template" class="md-nav__link">
    <span class="md-ellipsis">
      Revisar la plantilla aws-template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convertir-csv-a-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      convertir CSV a BUFR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="herramientas-de-conversion-de-datos">Herramientas de Conversión de Datos</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de Aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>Acceder a las herramientas de línea de comandos de ecCodes dentro del contenedor wis2box-api</li>
<li>Usar la herramienta synop2bufr para convertir informes FM-12 SYNOP a BUFR desde la línea de comandos</li>
<li>Activar la conversión synop2bufr a través de la wis2box-webapp</li>
<li>Usar la herramienta csv2bufr para convertir datos CSV a BUFR desde la línea de comandos</li>
</ul>
</div>
<h2 id="introduccion">Introducción</h2>
<p>Los datos publicados en WIS2 deben cumplir con los requisitos y estándares definidos por las diversas comunidades de expertos en disciplinas o dominios del sistema terrestre. Para reducir las barreras en la publicación de datos de observaciones superficiales terrestres, wis2box proporciona herramientas para convertir datos al formato BUFR. Estas herramientas están disponibles a través del contenedor wis2box-api y pueden ser utilizadas desde la línea de comandos para probar el proceso de conversión de datos.</p>
<p>Las principales conversiones actualmente soportadas por wis2box son de informes FM-12 SYNOP a BUFR y de datos CSV a BUFR. Los datos FM-12 son soportados porque todavía se usan ampliamente y se intercambian en la comunidad de la OMM, mientras que los datos CSV son soportados para permitir el mapeo de datos producidos por estaciones meteorológicas automáticas al formato BUFR.</p>
<h3 id="sobre-fm-12-synop">Sobre FM-12 SYNOP</h3>
<p>Los informes meteorológicos de superficie de estaciones terrestres históricamente se han reportado cada hora o en las horas sinópticas principales (00, 06, 12 y 18 UTC) e intermedias (03, 09, 15, 21 UTC). Antes de la migración a BUFR, estos informes se codificaban en el formato de texto plano FM-12 SYNOP. Aunque la migración a BUFR estaba programada para completarse en 2012, un gran número de informes todavía se intercambian en el formato heredado FM-12 SYNOP. Más información sobre el formato FM-12 SYNOP se puede encontrar en el Manual de Códigos de la OMM, Volumen I.1 (OMM-No. 306, Volumen I.1).</p>
<h3 id="sobre-eccodes">Sobre ecCodes</h3>
<p>La biblioteca ecCodes es un conjunto de bibliotecas y utilidades de software diseñadas para decodificar y codificar datos meteorológicos en los formatos GRIB y BUFR. Es desarrollada por el Centro Europeo de Predicción Meteorológica a Plazo Medio (ECMWF), consulta la <a href="https://confluence.ecmwf.int/display/ECC/ecCodes+documentation">documentación de ecCodes</a> para más información.</p>
<p>El software wis2box incluye la biblioteca ecCodes en la imagen base del contenedor wis2box-api. Esto permite a los usuarios acceder a las herramientas de línea de comandos y bibliotecas desde dentro del contenedor. La biblioteca ecCodes se utiliza dentro de wis2box-stack para decodificar y codificar mensajes BUFR.</p>
<h3 id="sobre-csv2bufr-y-synop2bufr">Sobre csv2bufr y synop2bufr</h3>
<p>Además de ecCodes, wis2box utiliza los siguientes módulos de Python que trabajan con ecCodes para convertir datos al formato BUFR:</p>
<ul>
<li><strong>synop2bufr</strong>: para soportar el formato heredado FM-12 SYNOP tradicionalmente utilizado por observadores manuales. El módulo synop2bufr se basa en metadatos adicionales de estaciones para codificar parámetros adicionales en el archivo BUFR. Consulta el <a href="https://github.com/World-Meteorological-Organization/synop2bufr">repositorio synop2bufr en GitHub</a></li>
<li><strong>csv2bufr</strong>: para habilitar la conversión de extractos CSV producidos por estaciones meteorológicas automáticas al formato BUFR. El módulo csv2bufr se utiliza para convertir datos CSV al formato BUFR utilizando una plantilla de mapeo que define cómo deben mapearse los datos CSV al formato BUFR. Consulta el <a href="https://github.com/World-Meteorological-Organization/csv2bufr">repositorio csv2bufr en GitHub</a></li>
</ul>
<p>Estos módulos pueden ser utilizados de forma independiente o como parte del stack de wis2box.</p>
<h2 id="preparacion">Preparación</h2>
<div class="admonition warning">
<p class="admonition-title">Requisitos Previos</p>
<ul>
<li>Asegúrate de que tu wis2box ha sido configurado e iniciado</li>
<li>Asegúrate de haber configurado un conjunto de datos y al menos una estación en tu wis2box</li>
<li>Conéctate al broker MQTT de tu instancia de wis2box usando MQTT Explorer</li>
<li>Abre la aplicación web de wis2box (<code>http://YOUR-HOST/wis2box-webapp</code>) y asegúrate de haber iniciado sesión</li>
<li>Abre el panel de control de Grafana para tu instancia accediendo a <code>http://YOUR-HOST:3000</code></li>
</ul>
</div>
<p>Para usar las herramientas de línea de comandos de BUFR, necesitarás haber iniciado sesión en el contenedor wis2box-api. A menos que se especifique lo contrario, todos los comandos deben ejecutarse en este contenedor. También necesitarás tener MQTT Explorer abierto y conectado a tu broker.</p>
<p>Primero, conéctate a tu máquina virtual de estudiante a través de tu cliente SSH y copia los materiales del ejercicio al contenedor wis2box-api:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>cp<span class="w"> </span>~/exercise-materials/data-conversion-exercises<span class="w"> </span>wis2box-api:/root
</code></pre></div>
<p>Luego, inicia sesión en el contenedor wis2box-api y cambia al directorio donde se encuentran los materiales del ejercicio:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2box-api
<span class="nb">cd</span><span class="w"> </span>/root/data-conversion-exercises
</code></pre></div>
<p>Confirma que las herramientas están disponibles, comenzando con ecCodes:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-V
</code></pre></div>
<p>Deberías obtener la siguiente respuesta:</p>
<div class="highlight"><pre><span></span><code>ecCodes Version 2.36.0
</code></pre></div>
<p>A continuación, verifica la versión de synop2bufr:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>--version
</code></pre></div>
<p>Deberías obtener la siguiente respuesta:</p>
<div class="highlight"><pre><span></span><code>synop2bufr, version 0.7.0
</code></pre></div>
<p>Finalmente, verifica csv2bufr:</p>
<div class="highlight"><pre><span></span><code>csv2bufr<span class="w"> </span>--version
</code></pre></div>
<p>Deberías obtener la siguiente respuesta:</p>
<div class="highlight"><pre><span></span><code>csv2bufr, version 0.8.6
</code></pre></div>
<h2 id="herramientas-de-linea-de-comandos-de-eccodes">Herramientas de línea de comandos de ecCodes</h2>
<p>La biblioteca ecCodes incluida en el contenedor wis2box-api proporciona una serie de herramientas de línea de comandos para trabajar con archivos BUFR. 
Los próximos ejercicios demuestran cómo usar <code>bufr_ls</code> y <code>bufr_dump</code> para verificar el contenido de un archivo BUFR.</p>
<h3 id="bufr_ls">bufr_ls</h3>
<p>En este primer ejercicio, usarás el comando <code>bufr_ls</code> para inspeccionar los encabezados de un archivo BUFR y determinar el tipo de contenido del archivo.</p>
<p>Usa el siguiente comando para ejecutar <code>bufr_ls</code> en el archivo <code>bufr-cli-ex1.bufr4</code>:</p>
<div class="highlight"><pre><span></span><code>bufr_ls<span class="w"> </span>bufr-cli-ex1.bufr4
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>bufr-cli-ex1.bufr4
centre<span class="w">                     </span>masterTablesVersionNumber<span class="w">  </span>localTablesVersionNumber<span class="w">   </span>typicalDate<span class="w">                </span>typicalTime<span class="w">                </span>numberOfSubsets
cnmc<span class="w">                       </span><span class="m">29</span><span class="w">                         </span><span class="m">0</span><span class="w">                          </span><span class="m">20231002</span><span class="w">                   </span><span class="m">000000</span><span class="w">                     </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>messages<span class="w"> </span><span class="k">in</span><span class="w"> </span>bufr-cli-ex1.bufr4

<span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>total<span class="w"> </span>messages<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>file
</code></pre></div>
<p>Se pueden pasar varias opciones a <code>bufr_ls</code> para cambiar tanto el formato como los campos de encabezado impresos.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál sería el comando para listar la salida anterior en formato JSON?</p>
<p>Puedes ejecutar el comando <code>bufr_ls</code> con la opción <code>-h</code> para ver las opciones disponibles.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Puedes cambiar el formato de salida a JSON usando la opción <code>-j</code>, es decir:
<div class="highlight"><pre><span></span><code>bufr_ls<span class="w"> </span>-j<span class="w"> </span>bufr-cli-ex1.bufr4
</code></pre></div></p>
<p>Al ejecutarlo, deberías obtener la siguiente salida:
<div class="highlight"><pre><span></span><code>{ &quot;messages&quot; : [
  {
    &quot;centre&quot;: &quot;cnmc&quot;,
    &quot;masterTablesVersionNumber&quot;: 29,
    &quot;localTablesVersionNumber&quot;: 0,
    &quot;typicalDate&quot;: 20231002,
    &quot;typicalTime&quot;: &quot;000000&quot;,
    &quot;numberOfSubsets&quot;: 1
  }
]}
</code></pre></div></p>
</details>
<p>La salida impresa representa los valores de algunas de las claves de encabezado en el archivo BUFR.</p>
<p>Por sí sola, esta información no es muy informativa, ya que solo proporciona información limitada sobre el contenido del archivo.</p>
<p>Al examinar un archivo BUFR, a menudo queremos determinar el tipo de datos contenidos en el archivo y la fecha/hora típica de los datos en el archivo. Esta información se puede listar usando la opción <code>-p</code> para seleccionar los encabezados a imprimir. Se pueden incluir múltiples encabezados usando una lista separada por comas.</p>
<p>Puedes usar el siguiente comando para listar la categoría de datos, subcategoría, fecha típica y hora típica:</p>
<div class="highlight"><pre><span></span><code>bufr_ls<span class="w"> </span>-p<span class="w"> </span>dataCategory,internationalDataSubCategory,typicalDate,typicalTime<span class="w"> </span>-j<span class="w"> </span>bufr-cli-ex1.bufr4
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Ejecuta el comando anterior e interpreta la salida usando <a href="https://github.com/wmo-im/CCT/blob/master/C13.csv">Common Code Table C-13</a> para determinar la categoría y subcategoría de datos.</p>
<p>¿Qué tipo de datos (categoría y subcategoría) contiene el archivo? ¿Cuál es la fecha y hora típica de los datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<div class="highlight"><pre><span></span><code>{ &quot;messages&quot; : [
  {
    &quot;dataCategory&quot;: 2,
    &quot;internationalDataSubCategory&quot;: 4,
    &quot;typicalDate&quot;: 20231002,
    &quot;typicalTime&quot;: &quot;000000&quot;
  }
]}
</code></pre></div>
<p>A partir de esto, vemos que:</p>
</details>
<ul>
<li>La categoría de datos es 2, lo que indica datos de <strong>"Sondeos verticales (distintos de satélite)"</strong>.</li>
<li>La subcategoría internacional es 4, lo que indica datos de <strong>"Informes de temperatura/humedad/viento en niveles superiores desde estaciones terrestres fijas (TEMP)"</strong>.</li>
<li>La fecha y hora típicas son 2023-10-02 y 00:00:00z, respectivamente.</li>
</ul>
<h3 id="bufr_dump">bufr_dump</h3>
<p>El comando <code>bufr_dump</code> se puede utilizar para listar y examinar el contenido de un archivo BUFR, incluidos los datos en sí.</p>
<p>Intenta ejecutar el comando <code>bufr_dump</code> en el segundo archivo de ejemplo <code>bufr-cli-ex2.bufr4</code>:</p>
<div class="highlight"><pre><span></span><code>bufr_dump bufr-cli-ex2.bufr4
</code></pre></div>
<p>Esto genera un JSON que puede ser difícil de interpretar; intenta usar la opción <code>-p</code> para mostrar los datos en texto plano (formato clave=valor):</p>
<div class="highlight"><pre><span></span><code>bufr_dump -p bufr-cli-ex2.bufr4
</code></pre></div>
<p>Verás una gran cantidad de claves como salida, muchas de las cuales están ausentes. Esto es típico en datos del mundo real, ya que no todas las claves de eccodes están pobladas con datos reportados.</p>
<p>Puedes usar el comando <code>grep</code> para filtrar la salida y mostrar solo las claves que no están ausentes. Por ejemplo, para mostrar todas las claves que no están ausentes, puedes usar el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>bufr_dump -p bufr-cli-ex2.bufr4 | grep -v MISSING
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es la presión reducida al nivel medio del mar reportada en el archivo BUFR <code>bufr-cli-ex2.bufr4</code>?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Usando el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>bufr-cli-ex2.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;pressureReducedToMeanSeaLevel&#39;</span>
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<p><div class="highlight"><pre><span></span><code>pressureReducedToMeanSeaLevel=105590
</code></pre></div>
Esto indica que la presión reducida al nivel medio del mar es de 105590 Pa (1055.90 hPa).</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es el identificador de estación WIGOS de la estación que reportó los datos en el archivo BUFR <code>bufr-cli-ex2.bufr4</code>?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Usando el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>bufr-cli-ex2.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>wigosIdentifierSeries=0
wigosIssuerOfIdentifier=20000
wigosIssueNumber=0
wigosLocalIdentifierCharacter=&quot;99100&quot;
</code></pre></div>
<p>Esto indica que el identificador de estación WIGOS es <code>0-20000-0-99100</code>.</p>
</details>
<h2 id="conversion-de-synop2bufr">Conversión de synop2bufr</h2>
<p>A continuación, veamos cómo convertir datos FM-12 SYNOP al formato BUFR utilizando el módulo <code>synop2bufr</code>. El módulo <code>synop2bufr</code> se utiliza para convertir datos FM-12 SYNOP al formato BUFR. Este módulo está instalado en el contenedor wis2box-api y se puede usar desde la línea de comandos de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>synop2bufr data transform \
    --metadata &lt;station-metadata.csv&gt; \
    --output-dir &lt;output-directory-path&gt; \
    --year &lt;year-of-observation&gt; \
    --month &lt;month-of-observation&gt; \
    &lt;input-fm12.txt&gt;
</code></pre></div>
<p>El argumento <code>--metadata</code> se utiliza para especificar el archivo de metadatos de la estación, que proporciona información adicional para ser codificada en el archivo BUFR.<br />
El argumento <code>--output-dir</code> se utiliza para especificar el directorio donde se escribirán los archivos BUFR convertidos. Los argumentos <code>--year</code> y <code>--month</code> se utilizan para especificar el año y el mes de la observación.</p>
<p>El módulo <code>synop2bufr</code> también se utiliza en la wis2box-webapp para convertir datos FM-12 SYNOP al formato BUFR mediante un formulario de entrada basado en la web.</p>
<p>Los próximos ejercicios demostrarán cómo funciona el módulo <code>synop2bufr</code> y cómo usarlo para convertir datos FM-12 SYNOP al formato BUFR.</p>
<h3 id="revisar-el-mensaje-synop-de-ejemplo">Revisar el mensaje SYNOP de ejemplo</h3>
<p>Inspecciona el archivo de mensaje SYNOP de ejemplo para este ejercicio <code>synop_message.txt</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/data-conversion-exercises
more<span class="w"> </span>synop_message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos informes SYNOP hay en este archivo?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La salida muestra lo siguiente:</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001=
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<p>Hay 3 informes SYNOP en el archivo, correspondientes a 3 estaciones diferentes (identificadas por los identificadores de estación tradicionales de 5 dígitos: 15015, 15020 y 15090).<br />
Nota que el final de cada informe está marcado por el carácter <code>=</code>.</p>
</details>
<h3 id="revisar-la-lista-de-estaciones">Revisar la lista de estaciones</h3>
<p>El argumento <code>--metadata</code> requiere un archivo CSV con un formato predefinido. Un ejemplo funcional se proporciona en el archivo <code>station_list.csv</code>:</p>
<p>Usa el siguiente comando para inspeccionar el contenido del archivo <code>station_list.csv</code>:</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas estaciones están listadas en la lista de estaciones? ¿Cuáles son los identificadores de estación WIGOS de las estaciones?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La salida muestra lo siguiente:</p>
<div class="highlight"><pre><span></span><code>station_name,wigos_station_identifier,traditional_station_identifier,facility_type,latitude,longitude,elevation,barometer_height,territory_name,wmo_region
OCNA SUGATAG,0-20000-0-15015,15015,landFixed,47.7770616258,23.9404602638,503.0,504.0,ROU,europe
BOTOSANI,0-20000-0-15020,15020,landFixed,47.7356532437,26.6455501701,161.0,162.1,ROU,europe
</code></pre></div>
<p>Esto corresponde a los metadatos de estación para 2 estaciones: con los identificadores de estación WIGOS <code>0-20000-0-15015</code> y <code>0-20000-0-15020</code>.</p>
</details>
<h3 id="convertir-synop-a-bufr">Convertir SYNOP a BUFR</h3>
<p>A continuación, usa el siguiente comando para convertir el mensaje FM-12 SYNOP al formato BUFR:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>synop_message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos archivos BUFR se crearon? ¿Qué significa el mensaje de ADVERTENCIA en la salida?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La salida muestra lo siguiente:</p>
<div class="highlight"><pre><span></span><code>[WARNING] Station 15090 not found in station file
</code></pre></div>
<p>Si verificas el contenido de tu directorio con el comando <code>ls -lh</code>, deberías ver que se crearon 2 nuevos archivos BUFR: <code>WIGOS_0-20000-0-15015_20240921T120000.bufr4</code> y <code>WIGOS_0-20000-0-15020_20240921T120000.bufr4</code>.</p>
<p>El mensaje de advertencia indica que la estación con el identificador de estación tradicional <code>15090</code> no se encontró en el archivo de lista de estaciones <code>station_list.csv</code>. Esto significa que el informe SYNOP para esta estación no se convirtió al formato BUFR.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Verifica el contenido del archivo BUFR <code>WIGOS_0-20000-0-15015_20240921T120000.bufr4</code> usando el comando <code>bufr_dump</code>.</p>
<p>¿Puedes confirmar que la información proporcionada en el archivo <code>station_list.csv</code> está presente en el archivo BUFR?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Puedes usar el siguiente comando para verificar el contenido del archivo BUFR:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15015_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>MISSING
</code></pre></div>
<p>Notarás la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>wigosIdentifierSeries=0
wigosIssuerOfIdentifier=20000
wigosIssueNumber=0
wigosLocalIdentifierCharacter=&quot;15015&quot;
blockNumber=15
stationNumber=15
stationOrSiteName=&quot;OCNA SUGATAG&quot;
stationType=1
year=2024
month=9
day=21
hour=12
minute=0
latitude=47.7771
longitude=23.9405
heightOfStationGroundAboveMeanSeaLevel=503
heightOfBarometerAboveMeanSeaLevel=504
...
</code></pre></div>
<p>Nota que esto incluye los datos proporcionados por el archivo <code>station_list.csv</code>.</p>
</details>
<h3 id="formulario-synop-en-wis2box-webapp">Formulario SYNOP en wis2box-webapp</h3>
<p>El módulo <code>synop2bufr</code> también se utiliza en la <code>wis2box-webapp</code> para convertir datos FM-12 SYNOP al formato BUFR mediante un formulario de entrada basado en la web.<br />
Para probar esto, ve a <code>http://YOUR-HOST/wis2box-webapp</code> e inicia sesión.</p>
<p>Selecciona el <code>SYNOP Form</code> del menú a la izquierda y copia el contenido del archivo <code>synop_message.txt</code>:</p>
<div class="highlight"><pre><span></span><code>AAXX 21121
15015 02999 02501 10103 21090 39765 42952 57020 60001=
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<p>En el área de texto <code>SYNOP message</code>:</p>
<p><img alt="synop-form" src="/../assets/img/wis2box-webapp-synop-form.png" width="800"></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Puedes enviar el formulario? ¿Cuál es el resultado?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Necesitas seleccionar un conjunto de datos y proporcionar el token para "processes/wis2box" que creaste en el ejercicio anterior para enviar el formulario.</p>
<p>Si proporcionas un token inválido, verás:</p>
<ul>
<li>Resultado: Unauthorized, please provide a valid 'processes/wis2box' token</li>
</ul>
<p>Si proporcionas un token válido, verás "WARNINGS: 3". Haz clic en "WARNINGS" para abrir el desplegable que mostrará:</p>
<ul>
<li>Station 15015 not found in station file</li>
<li>Station 15020 not found in station file</li>
<li>Station 15090 not found in station file</li>
</ul>
<p>Para convertir estos datos al formato BUFR, necesitarías configurar las estaciones correspondientes en tu wis2box y asegurarte de que las estaciones estén asociadas al tema de tu conjunto de datos.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>En el ejercicio para <a href="../ingesting-data-for-publication/">ingesting-data-for-publication</a> ingresaste el archivo "synop_202412030900.txt" y fue convertido al formato BUFR por el módulo synop2bufr.</p>
<p>En el flujo de trabajo automatizado en la wis2box, el año y el mes se extraen automáticamente del nombre del archivo y se utilizan para completar los argumentos <code>--year</code> y <code>--month</code> requeridos por synop2bufr, mientras que los metadatos de la estación se extraen automáticamente de la configuración de la estación en la wis2box.</p>
</div>
<h2 id="conversion-csv2bufr">Conversión csv2bufr</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Asegúrate de que sigues conectado al contenedor wis2box-api y en el directorio <code>/root/data-conversion-exercises</code>. Si saliste del contenedor en el ejercicio anterior, puedes volver a iniciar sesión de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2box-api
<span class="nb">cd</span><span class="w"> </span>/root/data-conversion-exercises
</code></pre></div>
</div>
<p>Ahora veamos cómo convertir datos CSV al formato BUFR utilizando el módulo <code>csv2bufr</code>. El módulo está instalado en el contenedor wis2box-api y puede usarse desde la línea de comandos de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>csv2bufr data transform \
    --bufr-template &lt;bufr-mapping-template&gt; \
    &lt;input-csv-file&gt;
</code></pre></div>
<p>El argumento <code>--bufr-template</code> se utiliza para especificar el archivo de plantilla de mapeo BUFR, que proporciona el mapeo entre los datos de entrada en formato CSV y los datos de salida en formato BUFR, especificado en un archivo JSON. Las plantillas de mapeo predeterminadas están instaladas en el directorio <code>/opt/csv2bufr/templates</code> en el contenedor wis2box-api.</p>
<h3 id="revisar-el-archivo-csv-de-ejemplo">Revisar el archivo CSV de ejemplo</h3>
<p>Revisa el contenido del archivo CSV de ejemplo <code>aws-example.csv</code>:</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>aws-example.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas filas de datos hay en el archivo CSV? ¿Cuál es el identificador de estación WIGOS de las estaciones que reportan en el archivo CSV?</p>
</div>
<details class="question">
<summary>Haz clic para revelar la respuesta</summary>
<p>La salida muestra lo siguiente:</p>
<div class="highlight"><pre><span></span><code>wsi_series,wsi_issuer,wsi_issue_number,wsi_local,wmo_block_number,wmo_station_number,station_type,year,month,day,hour,minute,latitude,longitude,station_height_above_msl,barometer_height_above_msl,station_pressure,msl_pressure,geopotential_height,thermometer_height,air_temperature,dewpoint_temperature,relative_humidity,method_of_ground_state_measurement,ground_state,method_of_snow_depth_measurement,snow_depth,precipitation_intensity,anemometer_height,time_period_of_wind,wind_direction,wind_speed,maximum_wind_gust_direction_10_minutes,maximum_wind_gust_speed_10_minutes,maximum_wind_gust_direction_1_hour,maximum_wind_gust_speed_1_hour,maximum_wind_gust_direction_3_hours,maximum_wind_gust_speed_3_hours,rain_sensor_height,total_precipitation_1_hour,total_precipitation_3_hours,total_precipitation_6_hours,total_precipitation_12_hours,total_precipitation_24_hours
0,20000,0,60355,60,355,1,2024,3,31,1,0,47.77706163,23.94046026,503,504.43,100940,101040,1448,5,298.15,294.55,80,3,1,1,0,0.004,10,-10,30,3,30,5,40,9,20,11,2,4.7,5.3,7.9,9.5,11.4
0,20000,0,60355,60,355,1,2024,3,31,2,0,47.77706163,23.94046026,503,504.43,100940,101040,1448,5,25.,294.55,80,3,1,1,0,0.004,10,-10,30,3,30,5,40,9,20,11,2,4.7,5.3,7.9,9.5,11.4
0,20000,0,60355,60,355,1,2024,3,31,3,0,47.77706163,23.94046026,503,504.43,100940,101040,1448,5,298.15,294.55,80,3,1,1,0,0.004,10,-10,30,3,30,5,40,9,20,11,2,4.7,5.3,7.9,9.5,11.4
</code></pre></div>
<p>La primera fila del archivo CSV contiene los encabezados de las columnas, que se utilizan para identificar los datos en cada columna.</p>
<p>Después de la fila de encabezado, hay 3 filas de datos, que representan 3 observaciones meteorológicas de la misma estación con el identificador de estación WIGOS <code>0-20000-0-60355</code> en tres momentos diferentes: <code>2024-03-31 01:00:00</code>, <code>2024-03-31 02:00:00</code> y <code>2024-03-31 03:00:00</code>.</p>
</details>
<h3 id="revisar-la-plantilla-aws-template">Revisar la plantilla aws-template</h3>
<p>El contenedor wis2box-api incluye un conjunto de plantillas de mapeo BUFR predefinidas que están instaladas en el directorio <code>/opt/csv2bufr/templates</code>.</p>
<p>Verifica el contenido del directorio <code>/opt/csv2bufr/templates</code>:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/opt/csv2bufr/templates
</code></pre></div>
<p>Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>CampbellAfrica-v1-template.json  aws-template.json  daycli-template.json
</code></pre></div>
<p>Revisemos el contenido del archivo <code>aws-template.json</code>:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/opt/csv2bufr/templates/aws-template.json
</code></pre></div>
<p>Esto devuelve un archivo JSON grande, que proporciona el mapeo para 43 columnas CSV.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué columna CSV está mapeada a la clave eccodes <code>airTemperature</code>? ¿Cuáles son los valores mínimos y máximos válidos para esta clave?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Usa el siguiente comando para filtrar la salida:</p>
<p><div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/opt/csv2bufr/templates/aws-template.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>airTemperature
</code></pre></div>
Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>{&quot;eccodes_key&quot;: &quot;#1#airTemperature&quot;, &quot;value&quot;: &quot;data:air_temperature&quot;, &quot;valid_min&quot;: &quot;const:193.15&quot;, &quot;valid_max&quot;: &quot;const:333.15&quot;},
</code></pre></div>
<p>El valor que se codificará para la clave eccodes <code>airTemperature</code> se tomará de los datos en la columna CSV: <strong>air_temperature</strong>.</p>
<p>Los valores mínimos y máximos para esta clave son <code>193.15</code> y <code>333.15</code>, respectivamente.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué columna CSV está mapeada a la clave eccodes <code>internationalDataSubCategory</code>? ¿Cuál es el valor de esta clave?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Usa el siguiente comando para filtrar la salida:</p>
<p><div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/opt/csv2bufr/templates/aws-template.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>internationalDataSubCategory
</code></pre></div>
Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>{&quot;eccodes_key&quot;: &quot;internationalDataSubCategory&quot;, &quot;value&quot;: &quot;const:2&quot;},
</code></pre></div>
</details>
<p><strong>No hay ninguna columna CSV asignada a la clave eccodes <code>internationalDataSubCategory</code></strong>, en su lugar se utiliza el valor constante 2, que se codificará en todos los archivos BUFR producidos con esta plantilla de mapeo.</p>
<h3 id="convertir-csv-a-bufr">convertir CSV a BUFR</h3>
<p>Intentemos convertir el archivo al formato BUFR utilizando el comando <code>csv2bufr</code>:</p>
<div class="highlight"><pre><span></span><code>cd /root/data-conversion-exercises
csv2bufr data transform --bufr-template aws-template ./aws-example.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos archivos BUFR se crearon?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La salida muestra lo siguiente:</p>
<div class="highlight"><pre><span></span><code>CLI:    ... Transforming ./aws-example.csv to BUFR ...
CLI:    ... Processing subsets:
CLI:    ..... 384 bytes written to ./WIGOS_0-20000-0-60355_20240331T010000.bufr4
#1#airTemperature: Value (25.0) out of valid range (193.15 - 333.15).; Element set to missing
CLI:    ..... 384 bytes written to ./WIGOS_0-20000-0-60355_20240331T020000.bufr4
CLI:    ..... 384 bytes written to ./WIGOS_0-20000-0-60355_20240331T030000.bufr4
CLI:    End of processing, exiting.
</code></pre></div>
<p>La salida indica que se crearon 3 archivos BUFR: <code>WIGOS_0-20000-0-60355_20240331T010000.bufr4</code>, <code>WIGOS_0-20000-0-60355_20240331T020000.bufr4</code> y <code>WIGOS_0-20000-0-60355_20240331T030000.bufr4</code>.</p>
</details>
<p>Para verificar el contenido de los archivos BUFR ignorando los valores faltantes, puedes usar el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-60355_20240331T010000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>MISSING
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es el valor de la clave eccodes <code>airTemperature</code> en el archivo BUFR <code>WIGOS_0-20000-0-60355_20240331T010000.bufr4</code>? ¿Y en el archivo BUFR <code>WIGOS_0-20000-0-60355_20240331T020000.bufr4</code>?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para filtrar la salida, puedes usar el siguiente comando:</p>
<p><div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-60355_20240331T010000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>MISSING<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>airTemperature
</code></pre></div>
Deberías ver la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>#1#airTemperature=298.15
</code></pre></div>
<p>Mientras que para el segundo archivo:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-60355_20240331T020000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>MISSING<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>airTemperature
</code></pre></div>
<p>No obtendrás ningún resultado, lo que indica que el valor de la clave <code>airTemperature</code> está ausente en el archivo BUFR <code>WIGOS_0-20000-0-60355_20240331T020000.bufr4</code>. El <code>csv2bufr</code> se negó a codificar el valor <code>25.0</code> del archivo CSV, ya que está fuera del rango válido de <code>193.15</code> y <code>333.15</code> definido en la plantilla de mapeo.</p>
</details>
<p>Ten en cuenta que convertir CSV a BUFR utilizando una de las plantillas de mapeo BUFR predefinidas tiene limitaciones:</p>
<ul>
<li>El archivo CSV debe estar en el formato definido en la plantilla de mapeo, es decir, los nombres de las columnas del CSV deben coincidir con los nombres definidos en la plantilla de mapeo.</li>
<li>Solo puedes codificar las claves definidas en la plantilla de mapeo.</li>
<li>Los controles de calidad están limitados a las verificaciones definidas en la plantilla de mapeo.</li>
</ul>
<p>Para obtener información sobre cómo crear y usar plantillas de mapeo BUFR personalizadas, consulta el siguiente ejercicio práctico <a href="../csv2bufr-templates/">csv2bufr-templates</a>.</p>
<h2 id="conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica has aprendido:</p>
<ul>
<li>cómo acceder a las herramientas de línea de comandos de ecCodes dentro del contenedor wis2box-api</li>
<li>cómo usar <code>synop2bufr</code> para convertir informes FM-12 SYNOP a BUFR desde la línea de comandos</li>
<li>cómo usar el formulario SYNOP en la wis2box-webapp para convertir informes FM-12 SYNOP a BUFR</li>
<li>cómo usar <code>csv2bufr</code> para convertir datos CSV a BUFR desde la línea de comandos</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>