
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/practical-sessions/downloading-data-from-wis2/">
      
      
        <link rel="prev" href="../datasets-with-access-control/">
      
      
        <link rel="next" href="../decoding-data/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Downloading data from WIS2 using wis2downloader - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#downloading-data-from-wis2-using-wis2downloader" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Downloading data from WIS2 using wis2downloader
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/practical-sessions/downloading-data-from-wis2/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/practical-sessions/downloading-data-from-wis2/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/practical-sessions/downloading-data-from-wis2/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ru/practical-sessions/downloading-data-from-wis2/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ar/practical-sessions/downloading-data-from-wis2/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Practical Sessions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practical Sessions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting to WIS2 over MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing your student VM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initializing wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring datasets in wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring station metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingesting data for Publication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Conversion Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSV-to-BUFR mapping templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding GTS headers to WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up a recommended dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Downloading data from WIS2 using wis2downloader
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Downloading data from WIS2 using wis2downloader
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2downloader-basics" class="md-nav__link">
    <span class="md-ellipsis">
      wis2downloader basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wis2downloader basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewing-the-wis2downloader-dashboard-in-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Viewing the wis2downloader dashboard in Grafana
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reviewing-the-wis2downloader-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Reviewing the wis2downloader configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wis2downloader-command-line-interface" class="md-nav__link">
    <span class="md-ellipsis">
      wis2downloader command line interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-gts-data-using-a-wis2-global-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Download GTS-data using a WIS2 Global Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Download GTS-data using a WIS2 Global Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-the-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Setup the subscription
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-downloaded-data" class="md-nav__link">
    <span class="md-ellipsis">
      Check the downloaded data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-example-data-from-the-wis2-training-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Download example data from the WIS2 Training Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Download example data from the WIS2 Training Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-wis2downloader-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Change the wis2downloader configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-new-subscriptions" class="md-nav__link">
    <span class="md-ellipsis">
      Setup new subscriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-downloaded-data_1" class="md-nav__link">
    <span class="md-ellipsis">
      Check the downloaded data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoding-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decoding data from WMO binary formats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Discovering datasets from the WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    cheatsheets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            cheatsheets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    csv2bufr-templates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            csv2bufr-templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DAYCLI Template
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2downloader-basics" class="md-nav__link">
    <span class="md-ellipsis">
      wis2downloader basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wis2downloader basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewing-the-wis2downloader-dashboard-in-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Viewing the wis2downloader dashboard in Grafana
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reviewing-the-wis2downloader-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Reviewing the wis2downloader configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wis2downloader-command-line-interface" class="md-nav__link">
    <span class="md-ellipsis">
      wis2downloader command line interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-gts-data-using-a-wis2-global-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Download GTS-data using a WIS2 Global Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Download GTS-data using a WIS2 Global Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-the-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Setup the subscription
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-downloaded-data" class="md-nav__link">
    <span class="md-ellipsis">
      Check the downloaded data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-example-data-from-the-wis2-training-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Download example data from the WIS2 Training Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Download example data from the WIS2 Training Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-wis2downloader-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Change the wis2downloader configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-new-subscriptions" class="md-nav__link">
    <span class="md-ellipsis">
      Setup new subscriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-downloaded-data_1" class="md-nav__link">
    <span class="md-ellipsis">
      Check the downloaded data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="downloading-data-from-wis2-using-wis2downloader">Downloading data from WIS2 using wis2downloader</h1>
<div class="admonition abstract">
<p class="admonition-title">Learning outcomes!</p>
<p>By the end of this practical session, you will be able to:</p>
<ul>
<li>use the "wis2downloader" to subscribe to WIS2 data notifications and download data to your local system</li>
<li>view the status of the downloads in the Grafana dashboard</li>
<li>learn how to configure the wis2downloader to subscribe to a non-default broker</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>In this session you will learn how to setup a subscription to a WIS2 Broker and automatically download data to your local system using the "wis2downloader"-service included in the wis2box. </p>
<div class="admonition note">
<p class="admonition-title">About wis2downloader</p>
<p>The wis2downloader is also available as a standalone service that can be run on a different system from the one that is publishing the WIS2 notifications. See <a href="https://pypi.org/project/wis2downloader/">wis2downloader</a> for more information for using the wis2downloader as a standalone service.</p>
<p>If you like to develop your own service for subscribing to WIS2 notifications and downloading data, you can use the <a href="https://github.com/World-Meteorological-Organization/wis2downloader">wis2downloader source code</a> as a reference.</p>
</div>
<h2 id="preparation">Preparation</h2>
<p>Before starting please login to your student VM and ensure your wis2box instance is up and running.</p>
<h2 id="wis2downloader-basics">wis2downloader basics</h2>
<p>The wis2downloader is included as a separate container in wis2box as defined in the Docker Compose files. The Prometheus container in wis2box is configured to scrape metrics from the wis2downloader container and these metrics can be visualized by a dashboard in Grafana.</p>
<h3 id="viewing-the-wis2downloader-dashboard-in-grafana">Viewing the wis2downloader dashboard in Grafana</h3>
<p>Open a web browser and navigate to the Grafana dashboard for your wis2box instance by going to <code>http://YOUR-HOST:3000</code>.</p>
<p>Click on dashboards in the left-hand menu, and then select the <strong>wis2downloader dashboard</strong>.</p>
<p>You should see the following dashboard:</p>
<p><img alt="wis2downloader dashboard" src="../../assets/img/wis2downloader-dashboard.png" /></p>
<p>This dashboard is based on metrics published by the wis2downloader service and will show you the status of the downloads that are currently in progress.</p>
<p>On the top left corner you can see the subscriptions that are currently active.</p>
<p>Keep this dashboard open as you will use it to monitor the download progress in the next exercise.</p>
<h3 id="reviewing-the-wis2downloader-configuration">Reviewing the wis2downloader configuration</h3>
<p>The wis2downloader service in wis2box can be configured using the environment variables defined in your <code>wis2box.env</code> file.</p>
<p>The following environment variables are used by the wis2downloader:</p>
<pre><code>- DOWNLOAD_BROKER_HOST: The hostname of the MQTT broker to connect to. Defaults to globalbroker.meteo.fr
- DOWNLOAD_BROKER_PORT: The port of the MQTT broker to connect to. Defaults to 443 (HTTPS for websockets)
- DOWNLOAD_BROKER_USERNAME: The username to use to connect to the MQTT broker. Defaults to everyone
- DOWNLOAD_BROKER_PASSWORD: The password to use to connect to the MQTT broker. Defaults to everyone
- DOWNLOAD_BROKER_TRANSPORT: websockets or tcp, the transport-mechanism to use to connect to the MQTT broker. Defaults to websockets,
- DOWNLOAD_RETENTION_PERIOD_HOURS: The retention period in hours for the downloaded data. Defaults to 24
- DOWNLOAD_WORKERS: The number of download workers to use. Defaults to 8. Determines the number of parallel downloads.
- DOWNLOAD_MIN_FREE_SPACE_GB: The minimum free space in GB to keep on the volume hosting the downloads. Defaults to 1.
</code></pre>
<p>To review the current configuration of the wis2downloader, you can use the following command:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>~/wis2box/wis2box.env<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>DOWNLOAD
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Review the configuration of the wis2downloader</p>
<p>What is the default MQTT broker that the wis2downloader connects to?</p>
<p>What is the default retention period for the downloaded data?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The default MQTT broker that the wis2downloader connects to is <code>globalbroker.meteo.fr</code>.</p>
<p>The default retention period for the downloaded data is 24 hours.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Updating the configuration of the wis2downloader</p>
<p>To update the configuration of the wis2downloader, you can edit the wis2box.env file. To apply the changes you can re-run the start command for the wis2box-stack:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<p>And you will see the wis2downloader service restart with the new configuration.</p>
</div>
<p>You can keep the default configuration for the next exercise.</p>
<h3 id="wis2downloader-command-line-interface">wis2downloader command line interface</h3>
<p>To access the command line interface of the wis2downloader within wis2box, you can login to the <strong>wis2downloader</strong> container using the following command:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>Use the following command to list the subscriptions that are currently active:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>list-subscriptions
</code></pre></div>
<p>This command returns an empty list, as there are no subscriptions setup yet.</p>
<h2 id="download-gts-data-using-a-wis2-global-broker">Download GTS-data using a WIS2 Global Broker</h2>
<p>If you kept the default configuration of the wis2downloader, it is currently connected to the WIS2 Global Broker hosted by Météo-France.</p>
<h3 id="setup-the-subscription">Setup the subscription</h3>
<p>Use the following command <code>cache/a/wis2/de-dwd-gts-to-wis2/#</code>, to subscribe to data published by the GTS-to-WIS2 gateway hosted by DWD, made available through the Global Caches:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>add-subscription<span class="w"> </span>--topic<span class="w"> </span>cache/a/wis2/de-dwd-gts-to-wis2/#
</code></pre></div>
<p>Then exit the <strong>wis2downloader</strong> container by typing <code>exit</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h3 id="check-the-downloaded-data">Check the downloaded data</h3>
<p>Check the wis2downloader dashboard in Grafana to see the new subscription added. Wait a few minutes and you should see the first downloads starting. Go to the next exercise once you have confirmed that the downloads are starting.</p>
<p>The wis2downloader service in wis2box downloads the data in the 'downloads' directory in the directory you defined as the <code>WIS2BOX_HOST_DATADIR</code> in your <code>wis2box.env</code> file. To view the contents of the downloads directory, use the following command:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-R<span class="w"> </span>~/wis2box-data/downloads
</code></pre></div>
<p>Note that the downloaded data is stored in directories named after the topic the WIS2 Notification was published on.</p>
<div class="admonition question">
<p class="admonition-title">Viewing the downloaded data</p>
<p>What directories do you see in the downloads directory?</p>
<p>Can you see any downloaded files in these directories?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>You should see a directory structure starting with <code>cache/a/wis2/de-dwd-gts-to-wis2/</code> underneath which you will see more directories named after the GTS-bulletin headers of the downloaded data.</p>
<p>Depending on when you started the subscription, you may or may not see any downloaded files in this directory yet. If you do not see any files yet, wait a few more minutes and check again.</p>
</details>
<p>Let's cleanup the subscription and the downloaded data before moving to the next exercise.</p>
<p>Log back in to the wis2downloader container:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>and remove the subscription you made from the wis2downloader, using the following command:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>remove-subscription<span class="w"> </span>--topic<span class="w"> </span>cache/a/wis2/de-dwd-gts-to-wis2/#
</code></pre></div>
<p>Remove the downloaded data using the following command in the wis2downloader container:</p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-rf<span class="w"> </span>app/data/downloads/*
</code></pre></div>
<p>The directory <code>app/data/downloads</code> in the wis2downloader container is mapped to the <code>downloads</code> directory in the directory you defined as the <code>WIS2BOX_HOST_DATADIR</code> in your <code>wis2box.env</code> file. The command above removes all downloaded data.</p>
<p>And exit the wis2downloader container by typing <code>exit</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>Check that the downloads-directory on your host is empty again:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-R<span class="w"> </span>~/wis2box-data/downloads
</code></pre></div>
<p>Check the wis2downloader dashboard in Grafana to see the subscription removed. You should see the downloads stopping.</p>
<div class="admonition note">
<p class="admonition-title">About GTS-to-WIS2 gateways</p>
<p>There are currently two GTS-to-WIS2 gateways currently publishing data through the WIS2 Global Broker and the Global Caches:</p>
<ul>
<li>DWD (Germany): centre-id=<em>de-dwd-gts-to-wis2</em></li>
<li>JMA (Japan): centre-id=<em>jp-jma-gts-to-wis2</em></li>
</ul>
<p>If in the previous exercise you replace <code>de-dwd-gts-to-wis2</code> with <code>jp-jma-gts-to-wis2</code>, you would receive the notifications and data published by the JMA GTS-to-WIS2 gateway.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Origin vs cache topics</p>
<p>When subscribing to a topic starting with <code>origin/</code>, you will receive notifications with a canonical URL that points to a data server provided by the WIS Centre publishing the data.</p>
<p>When subscribing to a topic starting with <code>cache/</code>, you will receive multiple notifications for the same data, one for each Global Cache. Each notification will contain a canonical URL that points to the data server of the respective Global Cache. The wis2downloader will download the data from the first canonical URL it can reach.</p>
</div>
<h2 id="download-example-data-from-the-wis2-training-broker">Download example data from the WIS2 Training Broker</h2>
<p>In this exercise, you will subscribe to the WIS2 Training Broker which is publishing example data for training purposes. </p>
<h3 id="change-the-wis2downloader-configuration">Change the wis2downloader configuration</h3>
<p>This demonstrates how to subscribe to a broker that is not the default broker and will allow you to download some data published from the WIS2 Training Broker.</p>
<p>Edit the <code>wis2box.env</code> file and change <code>DOWNLOAD_BROKER_HOST</code> to <code>wis2training-broker.wis2dev.io</code>, <code>DOWNLOAD_BROKER_PORT</code> to <code>1883</code> and <code>DOWNLOAD_BROKER_TRANSPORT</code> to <code>tcp</code>:</p>
<div class="highlight"><pre><span></span><code># downloader settings
DOWNLOAD_BROKER_HOST=wis2training-broker.wis2dev.io
DOWNLOAD_BROKER_PORT=1883
DOWNLOAD_BROKER_USERNAME=everyone
DOWNLOAD_BROKER_PASSWORD=everyone
# download transport mechanism (tcp or websockets)
DOWNLOAD_BROKER_TRANSPORT=tcp
</code></pre></div>
<p>Then run the 'start' command again to apply the changes:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<p>Check the logs of the wis2downloader to see if the connection to the new broker was successful:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>logs<span class="w"> </span>wis2downloader
</code></pre></div>
<p>You should see the following log message:</p>
<div class="highlight"><pre><span></span><code>...
INFO - Connecting...
INFO - Host: wis2training-broker.wis2dev.io, port: 1883
INFO - Connected successfully
</code></pre></div>
<h3 id="setup-new-subscriptions">Setup new subscriptions</h3>
<p>Now we will setup a new subscription to the topic to downloaded cyclone track data from the WIS2 Training Broker.</p>
<p>Login to the <strong>wis2downloader</strong> container:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>And execute the following command (copy-paste this to avoid typos):</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>add-subscription<span class="w"> </span>--topic<span class="w"> </span>origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/trajectory
</code></pre></div>
<p>Exit the <strong>wis2downloader</strong> container by typing <code>exit</code>.</p>
<h3 id="check-the-downloaded-data_1">Check the downloaded data</h3>
<p>Wait until you see the downloads starting in the wis2downloader dashboard in Grafana.</p>
<p>Check that the data was downloaded by checking the wis2downloader logs again with:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>logs<span class="w"> </span>wis2downloader
</code></pre></div>
<p>You should see a log message similar to the following:</p>
<div class="highlight"><pre><span></span><code>[...] INFO - Message received under topic origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/trajectory
[...] INFO - Downloaded A_JSXX05ECEP020000_C_ECMP_...
</code></pre></div>
<p>Check the contents of the downloads directory again:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-R<span class="w"> </span>~/wis2box-data/downloads
</code></pre></div>
<p>You should see a new directory named <code>origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/trajectory</code> containing the downloaded data.</p>
<div class="admonition question">
<p class="admonition-title">Review the downloaded data</p>
<p>What is the file format of the downloaded data?</p>
</div>
<details class="success">
<summary>Click to reveal answer</summary>
<p>The downloaded data is in BUFR format as indicated by the <code>.bufr</code> file extension. </p>
</details>
<p>Next try to add another two subscriptions to download monthly surface temperature anomalies and global ensemble forecast data from the following topics:</p>
<ul>
<li><code>origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/global</code></li>
<li><code>origin/a/wis2/int-wis2-training/data/core/climate/experimental/anomalies/monthly/surface-temperature</code></li>
</ul>
<p>Wait until you see the downloads starting in the wis2downloader dashboard in Grafana.</p>
<p>Check the contents of the downloads directory again:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-R<span class="w"> </span>~/wis2box-data/downloads
</code></pre></div>
<p>You should see the new directories corresponding to the topics you subscribed to, containing the downloaded data.</p>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Congratulations!</p>
<p>In this practical session, you learned how to:</p>
<ul>
<li>use the 'wis2downloader' to subscribe to a WIS2 Broker and download data to your local system</li>
<li>view the status of the downloads in the Grafana dashboard</li>
<li>how to change the default configuration of the wis2downloader to subscribe to a different broker</li>
<li>how to view the downloaded data on your local system</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>