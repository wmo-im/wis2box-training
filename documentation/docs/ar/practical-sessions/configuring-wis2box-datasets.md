---
title: إعداد مجموعات البيانات في wis2box
---

# إعداد مجموعات البيانات في wis2box

!!! abstract "نتائج التعلم"
    بنهاية هذه الجلسة العملية، ستكون قادرًا على:

    - إنشاء مجموعات بيانات جديدة باستخدام القالب الافتراضي وقالبك المخصص
    - إنشاء بيانات وصفية استكشافية لمجموعة البيانات الخاصة بك
    - تكوين تعيينات البيانات لمجموعة البيانات الخاصة بك
    - نشر إشعار WIS2 مع سجل WCMP2
    - تحديث وإعادة نشر مجموعة البيانات الخاصة بك

## المقدمة

يستخدم wis2box مجموعات بيانات مرتبطة ببيانات وصفية استكشافية وتعيينات بيانات.

تُستخدم البيانات الوصفية الاستكشافية لإنشاء سجل WCMP2 (WMO Core Metadata Profile 2) يتم مشاركته باستخدام إشعار WIS2 يتم نشره على wis2box-broker الخاص بك.

تُستخدم تعيينات البيانات لربط مكون إضافي للبيانات ببيانات الإدخال الخاصة بك، مما يسمح بتحويل بياناتك قبل نشرها باستخدام إشعار WIS2.

ستوجهك هذه الجلسة خلال إنشاء مجموعات بيانات جديدة باستخدام القالب الافتراضي وقالبك المخصص، وإنشاء بيانات وصفية استكشافية، وتكوين تعيينات البيانات. ستقوم بفحص مجموعات البيانات الخاصة بك في wis2box-api ومراجعة إشعار WIS2 للبيانات الوصفية الاستكشافية الخاصة بك.

## التحضير

اتصل بالوسيط الخاص بك باستخدام MQTT Explorer.

بدلاً من استخدام بيانات اعتماد الوسيط الداخلي الخاص بك، استخدم بيانات الاعتماد العامة `everyone/everyone`:

<img alt="MQTT Explorer: Connect to broker" src="/../assets/img/mqtt-explorer-wis2box-broker-everyone-everyone.png" width="800">

!!! Note

    لا تحتاج أبدًا إلى مشاركة بيانات اعتماد الوسيط الداخلي الخاص بك مع المستخدمين الخارجيين. المستخدم 'everyone' هو مستخدم عام لتمكين مشاركة إشعارات WIS2.

    بيانات الاعتماد `everyone/everyone` لديها وصول للقراءة فقط على الموضوع 'origin/a/wis2/#'. هذا هو الموضوع الذي يتم فيه نشر إشعارات WIS2. يمكن للـ Global Broker الاشتراك باستخدام بيانات الاعتماد العامة هذه لتلقي الإشعارات.

    لن يتمكن المستخدم 'everyone' من رؤية المواضيع الداخلية أو نشر الرسائل.

افتح متصفحًا وانتقل إلى الصفحة `http://YOUR-HOST/wis2box-webapp`. تأكد من تسجيل الدخول ويمكنك الوصول إلى صفحة 'محرر مجموعة البيانات'.

راجع القسم [Initializing wis2box](./initializing-wis2box.md) إذا كنت بحاجة إلى تذكر كيفية الاتصال بالوسيط أو الوصول إلى wis2box-webapp.

## إنشاء رمز تفويض لـ processes/wis2box

ستحتاج إلى رمز تفويض لنقطة النهاية 'processes/wis2box' لنشر مجموعة البيانات الخاصة بك.

لإنشاء رمز تفويض، قم بالوصول إلى جهاز التدريب الخاص بك عبر SSH واستخدم الأوامر التالية لتسجيل الدخول إلى حاوية wis2box-management:

```bash
cd ~/wis2box
python3 wis2box-ctl.py login
```

ثم قم بتشغيل الأمر التالي لإنشاء رمز تفويض عشوائي لنقطة النهاية 'processes/wis2box':

```bash
wis2box auth add-token --path processes/wis2box
```

يمكنك أيضًا إنشاء رمز بقيمة محددة عن طريق تقديم الرمز كوسيطة للأمر:

```bash
wis2box auth add-token --path processes/wis2box MyS3cretToken
```

تأكد من نسخ قيمة الرمز وتخزينها على جهازك المحلي، حيث ستحتاجها لاحقًا.

بمجرد حصولك على الرمز الخاص بك، يمكنك الخروج من حاوية wis2box-management:

```bash
exit
```

## إنشاء مجموعات بيانات جديدة في wis2box-webapp

انتقل إلى صفحة 'محرر مجموعة البيانات' في wis2box-webapp الخاص بمثيل wis2box الخاص بك عن طريق الذهاب إلى `http://YOUR-HOST/wis2box-webapp` واختيار 'محرر مجموعة البيانات' من القائمة الموجودة على الجانب الأيسر.

في صفحة 'محرر مجموعة البيانات'، ضمن علامة التبويب 'Datasets'، انقر على "Create New ...":

<img alt="Create New Dataset" src="/../assets/img/wis2box-create-new-dataset.png" width="800">

ستظهر نافذة منبثقة تطلب منك تقديم:

- **Centre ID**: هذا هو اختصار الوكالة (بحروف صغيرة وبدون مسافات)، كما هو محدد من قبل عضو WMO، الذي يحدد مركز البيانات المسؤول عن نشر البيانات.
- **Template**: القالب المقابل لنوع البيانات التي تقوم بإنشاء بيانات وصفية لها. يمكنك الاختيار بين استخدام قالب مُعرف مسبقًا أو اختيار 'other'. إذا تم اختيار 'other'، فهذا يعني أنك تريد تعريف قالب مخصص، وبالتالي يجب ملء الحقول الإضافية يدويًا.

<img alt="Create New Dataset pop up" src="/../assets/img/wis2box-create-new-dataset-pop-up.png" width="600">

!!! Note "Centre ID"

    يجب أن يبدأ centre-id الخاص بك بـ TLD لبلدك، متبوعًا بشرطة (`-`) واسم مختصر لمؤسستك (على سبيل المثال `fr-meteofrance`). يجب أن يكون centre-id بأحرف صغيرة ويستخدم الأحرف الأبجدية الرقمية فقط. تُظهر القائمة المنسدلة جميع centre-ids المسجلة حاليًا على WIS2 بالإضافة إلى أي centre-id قمت بإنشائه بالفعل في wis2box. يرجى اختيار centre-id المناسب لمؤسستك.

!!! Note "Template"

    يتيح لك حقل *Template* الاختيار من قائمة القوالب المتاحة في محرر مجموعة البيانات في wis2box-webapp. سيقوم القالب بملء النموذج مسبقًا بقيم افتراضية مقترحة مناسبة لنوع البيانات. يتضمن ذلك العنوان والكلمات الرئيسية المقترحة للبيانات الوصفية والمكونات الإضافية المكونة مسبقًا للبيانات. يتم تعيين الموضوع تلقائيًا إلى الموضوع الافتراضي المرتبط بالقالب المحدد.

    لأغراض التدريب، سنعمل مع خيارين عند إنشاء مجموعات بيانات جديدة:

    1. القالب المُعرف مسبقًا *weather/surface-based-observations/synop*، الذي يتضمن مكونات إضافية للبيانات تحول البيانات إلى تنسيق BUFR قبل النشر؛
    2. القالب *other*، الذي يتيح لك تعريف قالبك المخصص عن طريق ملء الحقول المطلوبة يدويًا.

    إذا كنت تريد نشر تنبيهات CAP باستخدام wis2box، فاستخدم القالب *weather/advisories-warnings*. يتضمن هذا القالب مكونًا إضافيًا للبيانات يتحقق من أن بيانات الإدخال هي تنبيه CAP صالح قبل النشر. لإنشاء تنبيهات CAP ونشرها عبر wis2box، يمكنك استخدام [WMO CAP Composer](https://github.com/World-Meteorological-Organization/cap-composer) أو إعادة توجيه CAP XML من نظامك الخاص إلى حاوية wis2box-incoming.

الآن، دعنا ننشئ مجموعة بيانات جديدة باستخدام القالب المُعرف مسبقًا.

## إنشاء مجموعة بيانات جديدة باستخدام القالب المُعرف مسبقًا

بالنسبة إلى **Template**، اختر **weather/surface-based-observations/synop**:

<img alt="Create New Dataset Form: Initial information" src="/../assets/img/wis2box-create-new-dataset-form-initial.png" width="450">

انقر على *continue to form* للمتابعة، ستظهر لك الآن **نموذج محرر مجموعة البيانات**.

نظرًا لأنك اخترت القالب **weather/surface-based-observations/synop**، سيتم ملء النموذج مسبقًا ببعض القيم الأولية المتعلقة بهذا النوع من البيانات.

### إنشاء البيانات الوصفية الاستكشافية

يتيح لك نموذج محرر مجموعة البيانات تقديم البيانات الوصفية الاستكشافية لمجموعة البيانات الخاصة بك التي ستستخدمها حاوية wis2box-management لنشر سجل WCMP2.

نظرًا لأنك اخترت القالب 'weather/surface-based-observations/synop'، سيتم ملء النموذج مسبقًا ببعض القيم الافتراضية.

يرجى التأكد من استبدال 'Local ID' المُولد تلقائيًا باسم وصفي لمجموعة البيانات الخاصة بك، مثل 'synop-dataset-wis2training':

<img alt="Metadata Editor: title, description, keywords" src="/../assets/img/wis2box-metadata-editor-part1.png" width="800">

راجع العنوان والكلمات الرئيسية، وقم بتحديثها حسب الضرورة، وقدم وصفًا لمجموعة البيانات الخاصة بك.

لاحظ أن هناك خيارات لتغيير 'WMO Data Policy' من 'core' إلى 'recommended' أو لتعديل معرف البيانات الوصفية الافتراضي الخاص بك، يرجى الاحتفاظ بسياسة البيانات كـ 'core' واستخدام معرف البيانات الوصفية الافتراضي.

بعد ذلك، راجع القسم الذي يحدد 'Temporal Properties' و'Spatial Properties'. يمكنك تعديل المربع المحيط عن طريق تحديث الحقول 'North Latitude' و'South Latitude' و'East Longitude' و'West Longitude':

<img alt="Metadata Editor: temporal properties, spatial properties" src="/../assets/img/wis2box-metadata-editor-part2.png" width="800">

بعد ذلك، املأ القسم الذي يحدد 'Contact Information of the Data Provider':

<img alt="Metadata Editor: contact information" src="/../assets/img/wis2box-metadata-editor-part3.png" width="800">

أخيرًا، املأ القسم الذي يحدد 'Data Quality Information':

بمجرد الانتهاء من ملء جميع الأقسام، انقر على 'VALIDATE FORM' وتحقق من وجود أي أخطاء في النموذج:

<img alt="Metadata Editor: validation" src="/../assets/img/wis2box-metadata-validation-error.png" width="800">

إذا كانت هناك أي أخطاء، قم بتصحيحها وانقر على 'VALIDATE FORM' مرة أخرى.

تأكد من عدم وجود أخطاء وأنك تحصل على نافذة منبثقة تشير إلى أن النموذج قد تم التحقق منه:

<img alt="Metadata Editor: validation success" src="/../assets/img/wis2box-metadata-validation-success.png" width="800">

بعد ذلك، قبل إرسال مجموعة البيانات الخاصة بك، راجع تعيينات البيانات لمجموعة البيانات الخاصة بك.

### تكوين تعيينات البيانات

نظرًا لأنك استخدمت قالبًا لإنشاء مجموعة البيانات الخاصة بك، فقد تم ملء تعيينات مجموعة البيانات مسبقًا بالمكونات الإضافية الافتراضية لقالب 'weather/surface-based-observations/synop'. تُستخدم المكونات الإضافية للبيانات في wis2box لتحويل البيانات قبل نشرها باستخدام إشعار WIS2.

<img alt="Data Mappings: update plugin" src="/../assets/img/wis2box-data-mappings.png" width="800">

لاحظ أنه يمكنك النقر على زر "update" لتغيير إعدادات الإضافة مثل امتداد الملف ونمط الملف، يمكنك ترك الإعدادات الافتراضية الآن. سيتم شرح ذلك بمزيد من التفصيل لاحقًا عند إنشاء مجموعة بيانات مخصصة.

### إرسال مجموعة البيانات الخاصة بك

أخيرًا، يمكنك النقر على 'submit' لنشر مجموعة البيانات الخاصة بك.

ستحتاج إلى توفير رمز التفويض الخاص بـ 'processes/wis2box' الذي قمت بإنشائه مسبقًا. إذا لم تقم بذلك، يمكنك إنشاء رمز جديد باتباع التعليمات في قسم التحضير.

تحقق من أنك تحصل على الرسالة التالية بعد إرسال مجموعة البيانات الخاصة بك، مما يشير إلى أنه تم إرسال مجموعة البيانات بنجاح:

<img alt="Submit Dataset Success" src="/../assets/img/wis2box-submit-dataset-success.png" width="400">

بعد النقر على 'OK'، سيتم توجيهك إلى الصفحة الرئيسية لمحرر مجموعة البيانات. الآن إذا نقرت على علامة التبويب 'Dataset'، يجب أن ترى مجموعة البيانات الجديدة الخاصة بك مدرجة:

<img alt="Dataset Editor: new dataset" src="/../assets/img/wis2box-dataset-editor-new-dataset.png" width="800">

### مراجعة إشعار WIS2 للبيانات الوصفية الخاصة بالاكتشاف

انتقل إلى MQTT Explorer، إذا كنت متصلاً بالـ broker، يجب أن ترى إشعار WIS2 جديدًا منشورًا على الموضوع `origin/a/wis2/<your-centre-id>/metadata`:

<img alt="MQTT Explorer: WIS2 notification" src="/../assets/img/mqtt-explorer-wis2-notification-metadata.png" width="800">

قم بفحص محتوى إشعار WIS2 الذي قمت بنشره. يجب أن ترى JSON به هيكل يتوافق مع تنسيق رسالة إشعار WIS (WNM).

!!! question

    على أي موضوع يتم نشر إشعار WIS2؟

??? success "انقر للكشف عن الإجابة"

    يتم نشر إشعار WIS2 على الموضوع `origin/a/wis2/<your-centre-id>/metadata`.

!!! question
    
    حاول العثور على العنوان والوصف والكلمات المفتاحية التي قدمتها في البيانات الوصفية للاكتشاف في إشعار WIS2. هل يمكنك العثور عليها؟

??? success "انقر للكشف عن الإجابة"

    **العنوان والوصف والكلمات المفتاحية التي قدمتها في البيانات الوصفية للاكتشاف غير موجودة في حمولة إشعار WIS2!** 
    
    بدلاً من ذلك، حاول البحث عن الرابط القانوني في قسم "links" في إشعار WIS2:

    <img alt="WIS2 notification for metadata, links sections" src="/../assets/img/wis2-notification-metadata-links.png" width="800">

    **يتضمن إشعار WIS2 رابطًا قانونيًا إلى سجل WCMP2 الذي تم نشره.** 
    
    انسخ هذا الرابط القانوني والصقه في متصفحك للوصول إلى سجل WCMP2. بناءً على إعدادات متصفحك، قد يُطلب منك تنزيل الملف أو قد يتم عرضه مباشرة في المتصفح.

    ستجد العنوان والوصف والكلمات المفتاحية التي قدمتها داخل سجل WCMP2.

يوفر wis2box عددًا محدودًا فقط من القوالب المعرفة مسبقًا. تم تصميم هذه القوالب لأنواع البيانات الشائعة، لكنها قد لا تتطابق دائمًا مع البيانات المتخصصة. عندما لا تكون القوالب المعرفة مسبقًا مناسبة، يمكن إنشاء قالب مخصص. يتيح ذلك للمستخدمين تحديد الحقول الوصفية المطلوبة وفقًا لمجموعة البيانات الخاصة بهم.

في القسم التالي، سنقوم بإنشاء مجموعة بيانات جديدة ونوضح كيفية تكوينها باستخدام قالب مخصص.

## إنشاء مجموعة بيانات جديدة عن طريق تكوين قالب مخصص

بالنسبة إلى **Template**، اختر **other**:

<img alt="Create New Dataset Form: Initial information" src="/../assets/img/wis2box-create-new-dataset-form-initial-other.png" width="450">

انقر على *continue to form* للمتابعة، ستظهر لك الآن **نموذج محرر مجموعة البيانات**.

بما أن قالب *other* تم اختياره، فإن الخطوة التالية هي النقر على *Continue* للمتابعة. ستظهر لك الآن نموذج محرر مجموعة البيانات. داخل هذا النموذج، يجب على المستخدم إكمال أو مراجعة الحقول الرئيسية مثل العنوان، الوصف، المواضيع الفرعية، والكلمات المفتاحية. يتحكم خيار "Experimental (free text topic)" في كيفية تعريف المواضيع الفرعية: إذا تم تحديد هذا الخيار، يمكن إدخال المواضيع الفرعية كنص حر، مما يسمح للمستخدم بتعريف موضوع مخصص. إذا لم يتم تحديد الخيار، يتم تقديم المواضيع الفرعية كقائمة منسدلة، ويجب اختيار أحد الخيارات المعرفة مسبقًا.

### إنشاء بيانات وصفية مخصصة للاكتشاف

في هذه المرحلة، ستحتاج إلى إكمال الحقول المطلوبة في نموذج محرر مجموعة البيانات، بما في ذلك العنوان، الوصف، المعرف المحلي، المواضيع الفرعية، والكلمات المفتاحية.

لغرض هذا التدريب، سنكمل هذه الحقول باستخدام قالب مجموعة بيانات مخصص لنظام التنبؤ العالمي (GEPS) كمثال. هذا المثال يستخدم فقط كمرجع — في عمليات WIS2 الحقيقية، يجب على المستخدمين تخصيص الحقول الوصفية وفقًا لمتطلبات مجموعات البيانات الخاصة بهم.

<img alt="Metadata Editor: title, description, keywords" src="/../assets/img/wis2box-metadata-editor-part1-other.png" width="800">

<img alt="Metadata Editor: title, description, keywords" src="/../assets/img/wis2box-metadata-editor-part1-other-2.png" width="800">

الخطوات التالية هي نفسها عند إنشاء مجموعة بيانات باستخدام قالب synop المعرفة مسبقًا. للحصول على تعليمات مفصلة، يرجى الرجوع إلى قسم *إنشاء بيانات وصفية للاكتشاف* تحت *إنشاء مجموعة بيانات جديدة باستخدام قالب معرفة مسبقًا*.

### تكوين تعيينات البيانات المخصصة

عند استخدام قالب مخصص، لا يتم توفير تعيينات بيانات افتراضية. نتيجة لذلك، سيكون محرر تعيينات البيانات فارغًا ويجب على المستخدمين تكوين التعيينات وفقًا لمتطلباتهم الخاصة.

<img alt="Data Mappings: update plugin" src="/../assets/img/wis2box-data-mappings-other1.png" width="800">

في هذا التدريب، سنخصص مجموعة بيانات GEPS ونستخدم الإضافة العامة للبيانات بدون تحويل كمثال. تم تصميم هذه الإضافة لنشر البيانات دون تطبيق أي تحويل. بما أن بيانات GEPS يتم تسليمها بتنسيق GRIB2، يجب تعيين امتداد الملف إلى .grib2؛ وإلا، لن يتم نشر البيانات بنجاح.

يجب إيلاء اهتمام خاص لحقل Regex، حيث يؤثر بشكل مباشر على استيعاب البيانات. إذا لم يتطابق التعبير العادي مع نمط تسمية ملفات البيانات، ستحدث أخطاء في النشر. لتجنب ذلك، قم إما بتحديث التعبير العادي ليتطابق مع اتفاقية تسمية مجموعة البيانات الخاصة بك، أو اترك التعبير العادي الافتراضي دون تغيير وتأكد من إعادة تسمية ملفات البيانات الخاصة بك وفقًا لذلك.

<img alt="Data Mappings: update plugin" src="/../assets/img/wis2box-data-mappings-other2.png" width="800">

في عمليات WIS2 الحقيقية، قد يختار المستخدمون إضافات مختلفة بناءً على متطلباتهم؛ هنا نستخدم الإضافة العامة للبيانات بدون تحويل فقط كمثال.

إذا كنت ترغب في نشر أنواع وأشكال أخرى من البيانات، يمكنك النقر على زر "update" لتغيير الإعدادات مثل امتداد الملف ونمط الملف.

<img alt="Data Mappings: update plugin" src="/../assets/img/wis2box-data-mappings-other3.png" width="800">

### إرسال مجموعة البيانات المخصصة الخاصة بك

عملية الإرسال هي نفسها كما هو موضح في قسم *إرسال مجموعة البيانات الخاصة بك* تحت *إنشاء مجموعة بيانات جديدة باستخدام قالب معرفة مسبقًا*. يرجى الرجوع إلى هذا القسم للحصول على تعليمات مفصلة.

بعد الإرسال الناجح، ستظهر مجموعة البيانات الجديدة الخاصة بك في علامة التبويب Dataset:

<img alt="Dataset Editor: new dataset" src="/../assets/img/wis2box-dataset-editor-new-dataset-other.png" width="800">

### مراجعة إشعار WIS2 للبيانات الوصفية الخاصة بالاكتشاف

انتقل إلى MQTT Explorer، إذا كنت متصلاً بالـ broker، يجب أن ترى إشعار WIS2 جديدًا منشورًا على الموضوع `origin/a/wis2/<your-centre-id>/metadata`:

<img alt="MQTT Explorer: WIS2 notification" src="/../assets/img/mqtt-explorer-wis2-notification-metadata-other.png" width="800">

!!! question
    
    ما هو معرف البيانات الوصفية لمجموعة بيانات GEPS المخصصة التي قمت بإنشائها؟

??? success "انقر للكشف عن الإجابة"

    بفتح واجهة wis2box، يمكنك عرض مجموعة بيانات GEPS المخصصة. معرف البيانات الوصفية هو:

    *urn:wmo:md:nl-knmi-test:customized-geps-dataset-wis2-training*

!!! question

    إذا قمنا بتعديل مجموعة بيانات، هل سيتم إرسال رسالة إشعار بيانات جديدة؟ ما هي التغييرات المتوقعة؟

??? success "انقر للكشف عن الإجابة"

    نعم. سيتم إرسال رسالة إشعار بيانات جديدة. في الرسالة، ستتغير قيمة "rel": "canonical" داخل عنصر "links" إلى "rel": "update"، مما يشير إلى أن مجموعة البيانات قد تم تعديلها.

!!! question
    
    إذا قمنا بحذف مجموعة بيانات، هل سيتم إرسال رسالة إشعار بيانات جديدة؟ ما هي التغييرات المتوقعة؟

??? success "انقر للكشف عن الإجابة"

    نعم. سيتم إرسال رسالة إشعار بيانات جديدة. في الرسالة، ستتغير قيمة "rel": "canonical" داخل عنصر "links" إلى "rel": "deletion"، مما يشير إلى أن مجموعة البيانات قد تمت إزالتها.

## الخاتمة

!!! success "تهانينا!"
    في هذه الجلسة العملية، تعلمت كيفية:

    - إنشاء مجموعات بيانات جديدة باستخدام القالب الافتراضي والقالب المخصص
    - تعريف البيانات الوصفية للاكتشاف
    - مراجعة تعيينات البيانات الخاصة بك
    - نشر البيانات الوصفية للاكتشاف
    - مراجعة إشعار WIS2 للبيانات الوصفية الخاصة بالاكتشاف