---
title: الاستعلام عن البيانات باستخدام واجهة برمجة تطبيقات wis2box
---

# الاستعلام عن البيانات باستخدام واجهة برمجة تطبيقات wis2box

!!! abstract "مخرجات التعلم"
    بنهاية هذه الجلسة العملية، ستكون قادراً على:

    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام عن محطاتك وتصفيتها
    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام عن بياناتك وتصفيتها

## مقدمة

توفر واجهة برمجة تطبيقات wis2box إمكانية الاكتشاف والاستعلام بطريقة قابلة للقراءة آلياً للبيانات التي تم إدخالها في wis2box. تستند واجهة برمجة التطبيقات على معيار OGC API - Features وتم تنفيذها باستخدام [pygeoapi](https://pygeoapi.io).

توفر واجهة برمجة تطبيقات wis2box الوصول إلى المجموعات التالية:

- المحطات
- البيانات الوصفية للاكتشاف
- إشعارات البيانات
- بالإضافة إلى مجموعة واحدة لكل مجموعة بيانات تم تكوينها، والتي تخزن المخرجات من bufr2geojson (يجب تمكين الإضافة `bufr2geojson` في تكوين تعيينات البيانات لملء العناصر في مجموعة البيانات).

في هذه الجلسة العملية ستتعلم كيفية استخدام واجهة برمجة تطبيقات البيانات لتصفح البيانات التي تم إدخالها في wis2box والاستعلام عنها.

## التحضير

!!! note
    انتقل إلى الصفحة الرئيسية لواجهة برمجة تطبيقات wis2box في متصفح الويب الخاص بك:

    `http://YOUR-HOST/oapi`

<img alt="wis2box-api-landing-page" src="../../assets/img/wis2box-api-landing-page.png" width="600">

## فحص المجموعات

من الصفحة الرئيسية، انقر على رابط 'المجموعات'.

!!! question
    كم عدد مجموعات البيانات التي تراها في الصفحة الناتجة؟ ما الذي تعتقد أن كل مجموعة تمثله؟

??? success "انقر لكشف الإجابة"
    يجب أن تكون هناك 4 مجموعات معروضة، بما في ذلك "المحطات"، و"البيانات الوصفية للاكتشاف"، و"إشعارات البيانات"

## فحص المحطات

من الصفحة الرئيسية، انقر على رابط 'المجموعات'، ثم انقر على رابط 'المحطات'.

<img alt="wis2box-api-collections-stations" src="../../assets/img/wis2box-api-collections-stations.png" width="600">

انقر على رابط 'تصفح'، ثم انقر على رابط 'json'.

!!! question
    كم عدد المحطات المُرجعة؟ قارن هذا الرقم بقائمة المحطات في `http://YOUR-HOST/wis2box-webapp/station`

??? success "انقر لكشف الإجابة"
    يجب أن يكون عدد المحطات من واجهة برمجة التطبيقات مساوياً لعدد المحطات التي تراها في تطبيق wis2box.

!!! question
    كيف يمكننا الاستعلام عن محطة واحدة (مثل `Balaka`)؟

??? success "انقر لكشف الإجابة"
    استعلم عن واجهة برمجة التطبيقات باستخدام `http://YOUR-HOST/oapi/collections/stations/items?q=Balaka`.

!!! note
    المثال أعلاه مبني على بيانات اختبار مالاوي. حاول الاختبار مقابل المحطات التي قمت بإدخالها كجزء من التمارين السابقة.

## فحص الرصدات

!!! note
    المثال أعلاه مبني على بيانات اختبار مالاوي. حاول الاختبار مقابل الرصدات التي قمت بإدخالها كجزء من التمارين.

من الصفحة الرئيسية، انقر على رابط 'المجموعات'، ثم انقر على رابط 'رصدات الطقس السطحية من مالاوي'.

<img alt="wis2box-api-collections-malawi-obs" src="../../assets/img/wis2box-api-collections-malawi-obs.png" width="600">

انقر على رابط 'القابل للاستعلام'.

<img alt="wis2box-api-collections-malawi-obs-queryables" src="../../assets/img/wis2box-api-collections-malawi-obs-queryables.png" width="600">

!!! question
    أي قابل للاستعلام سيتم استخدامه للتصفية حسب معرف المحطة؟

??? success "انقر لكشف الإجابة"
    `wigos_station_identifer` هو القابل للاستعلام الصحيح.

انتقل إلى الصفحة السابقة (أي `http://YOUR-HOST/oapi/collections/urn:wmo:md:mwi:mwi_met_centre:surface-weather-observations`)

انقر على رابط 'تصفح'.

!!! question
    كيف يمكننا تصور استجابة JSON؟

??? success "انقر لكشف الإجابة"
    بالنقر على رابط 'JSON' في أعلى يمين الصفحة، أو بإضافة `f=json` إلى طلب واجهة برمجة التطبيقات في متصفح الويب.

افحص استجابة JSON للرصدات.

!!! question
    كم عدد السجلات المُرجعة؟

!!! question
    كيف يمكننا تحديد الاستجابة إلى 3 رصدات؟

??? success "انقر لكشف الإجابة"
    أضف `limit=3` إلى طلب واجهة برمجة التطبيقات.

!!! question
    كيف يمكننا ترتيب الاستجابة حسب أحدث الرصدات؟

??? success "انقر لكشف الإجابة"
    أضف `sortby=-resultTime` إلى طلب واجهة برمجة التطبيقات (لاحظ علامة `-` للإشارة إلى ترتيب تنازلي). للترتيب حسب أقدم الرصدات، قم بتحديث الطلب ليتضمن `sortby=resultTime`.

!!! question
    كيف يمكننا تصفية الرصدات حسب محطة واحدة؟

??? success "انقر لكشف الإجابة"
    أضف `wigos_station_identifier=<WSI>` إلى طلب واجهة برمجة التطبيقات.

!!! question
    كيف يمكننا استلام الرصدات بتنسيق CSV؟

??? success "انقر لكشف الإجابة"
    أضف `f=csv` إلى طلب واجهة برمجة التطبيقات.

!!! question
    كيف يمكننا عرض رصد واحد (معرف)؟

??? success "انقر لكشف الإجابة"
    باستخدام معرف الميزة من طلب واجهة برمجة التطبيقات مقابل الرصدات، استعلم عن واجهة برمجة التطبيقات لـ `http://YOUR-HOST/oapi/collections/{collectionId}/items/{featureId}`، حيث `{collectionId}` هو اسم مجموعة الرصدات الخاصة بك و `{itemId}` هو معرف الرصد الواحد المطلوب.

## الخاتمة

!!! success "تهانينا!"
    في هذه الجلسة العملية، تعلمت كيفية:

    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام عن محطاتك وتصفيتها
    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام عن بياناتك وتصفيتها