---
title: استعلام البيانات باستخدام واجهة برمجة تطبيقات wis2box
---

# استعلام البيانات باستخدام واجهة برمجة تطبيقات wis2box

!!! abstract "نتائج التعلم"
    بنهاية هذه الجلسة العملية، ستكون قادرًا على:

    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام وتصفية محطاتك
    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام وتصفية بياناتك

## مقدمة

توفر واجهة برمجة تطبيقات wis2box إمكانية الاكتشاف والاستعلام بطريقة قابلة للقراءة آليًا للبيانات التي تم استيعابها في wis2box. تعتمد الواجهة على معيار OGC API - Features ويتم تنفيذها باستخدام [pygeoapi](https://pygeoapi.io).

توفر واجهة برمجة تطبيقات wis2box الوصول إلى المجموعات التالية:

- المحطات
- بيانات الاكتشاف
- إشعارات البيانات
- بالإضافة إلى مجموعة واحدة لكل مجموعة بيانات مُعدة، والتي تخزن الناتج من bufr2geojson (يجب تمكين الإضافة `bufr2geojson` في تكوين تعيينات البيانات لملء العناصر في مجموعة البيانات).

في هذه الجلسة العملية ستتعلم كيفية استخدام واجهة برمجة تطبيقات البيانات لتصفح واستعلام البيانات التي تم استيعابها في wis2box.

## التحضير

!!! note
    انتقل إلى صفحة الهبوط الخاصة بواجهة برمجة تطبيقات wis2box في متصفح الويب الخاص بك:

    `http://YOUR-HOST/oapi`

<img alt="wis2box-api-landing-page" src="/../assets/img/wis2box-api-landing-page.png" width="600">

## فحص المجموعات

من صفحة الهبوط، انقر على رابط 'المجموعات'.

!!! question
    كم عدد مجموعات البيانات التي تراها في الصفحة الناتجة؟ ماذا تعتقد أن كل مجموعة تمثل؟

??? success "انقر لكشف الإجابة"
    يجب أن يتم عرض 4 مجموعات، بما في ذلك "المحطات"، "بيانات الاكتشاف"، و"إشعارات البيانات"

## فحص المحطات

من صفحة الهبوط، انقر على رابط 'المجموعات'، ثم انقر على رابط 'المحطات'.

<img alt="wis2box-api-collections-stations" src="/../assets/img/wis2box-api-collections-stations.png" width="600">

انقر على رابط 'تصفح'، ثم انقر على رابط 'json'.

!!! question
    كم عدد المحطات التي يتم إرجاعها؟ قارن هذا العدد بقائمة المحطات في `http://YOUR-HOST/wis2box-webapp/station`

??? success "انقر لكشف الإجابة"
    يجب أن يكون عدد المحطات من الواجهة مساويًا لعدد المحطات التي تراها في تطبيق wis2box الويب.

!!! question
    كيف يمكننا الاستعلام عن محطة واحدة (مثلاً `Balaka`)؟

??? success "انقر لكشف الإجابة"
    استعلم عن الواجهة باستخدام `http://YOUR-HOST/oapi/collections/stations/items?q=Balaka`.

!!! note
    المثال أعلاه يعتمد على بيانات اختبار مالاوي. جرب الاختبار ضد المحطات التي قمت بإدخالها كجزء من التمارين السابقة.

## فحص الملاحظات

!!! note
    المثال أعلاه يعتمد على بيانات اختبار مالاوي. جرب الاختبار ضد الملاحظة التي قمت بإدخالها كجزء من التمارين.

من صفحة الهبوط، انقر على رابط 'المجموعات'، ثم انقر على رابط 'ملاحظات الطقس السطحية من مالاوي'.

<img alt="wis2box-api-collections-malawi-obs" src="/../assets/img/wis2box-api-collections-malawi-obs.png" width="600">

انقر على رابط 'الاستعلامات'.

<img alt="wis2box-api-collections-malawi-obs-queryables" src="/../assets/img/wis2box-api-collections-malawi-obs-queryables.png" width="600">

!!! question
    أي استعلام يمكن استخدامه للتصفية حسب معرف المحطة؟

??? success "انقر لكشف الإجابة"
    الاستعلام `wigos_station_identifer` هو الصحيح.

انتقل إلى الصفحة السابقة (أي `http://YOUR-HOST/oapi/collections/urn:wmo:md:mwi:mwi_met_centre:surface-weather-observations`)

انقر على رابط 'تصفح'.

!!! question
    كيف يمكننا تصور الاستجابة JSON؟

??? success "انقر لكشف الإجابة"
    بالنقر على رابط 'JSON' في أعلى يمين الصفحة، أو بإضافة `f=json` إلى طلب الواجهة في المتصفح الويب.

فحص استجابة JSON للملاحظات.

!!! question
    كم عدد السجلات المُرجعة؟

!!! question
    كيف يمكننا تحديد الاستجابة إلى 3 ملاحظات؟

??? success "انقر لكشف الإجابة"
    أضف `limit=3` إلى طلب الواجهة.

!!! question
    كيف يمكننا فرز الاستجابة حسب أحدث الملاحظات؟

??? success "انقر لكشف الإجابة"
    أضف `sortby=-resultTime` إلى طلب الواجهة (لاحظ العلامة `-` للدلالة على ترتيب تنازلي). للفرز حسب أقدم الملاحظات، قم بتحديث الطلب ليشمل `sortby=resultTime`.

!!! question
    كيف يمكننا تصفية الملاحظات حسب محطة واحدة؟

??? success "انقر لكشف الإجابة"
    أضف `wigos_station_identifier=<WSI>` إلى طلب الواجهة.

!!! question
    كيف يمكننا استلام الملاحظات كملف CSV؟

??? success "انقر لكشف الإجابة"
    أضف `f=csv` إلى طلب الواجهة.

!!! question
    كيف يمكننا عرض ملاحظة واحدة (id)؟

??? success "انقر لكشف الإجابة"
    باستخدام معرف الميزة من طلب واجهة ضد الملاحظات، استعلم عن الواجهة لـ `http://YOUR-HOST/oapi/collections/{collectionId}/items/{featureId}`، حيث `{collectionId}` هو اسم مجموعة الملاحظات الخاصة بك و`{itemId}` هو معرف الملاحظة المفردة المهمة.

## الختام

!!! success "تهانينا!"
    في هذه الجلسة العملية، تعلمت كيفية:

    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام وتصفية محطاتك
    - استخدام واجهة برمجة تطبيقات wis2box للاستعلام وتصفية بياناتك