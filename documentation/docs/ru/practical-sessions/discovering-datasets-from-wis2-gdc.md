---
title: Обнаружение наборов данных из Глобального каталога открытия WIS2
---

# Обнаружение наборов данных из Глобального каталога открытия WIS2

!!! abstract "Учебные результаты!"

    К концу этой практической сессии вы сможете:

    - использовать pywiscat для поиска наборов данных из Глобального каталога открытия (GDC)

## Введение

На этом занятии вы научитесь обнаруживать данные из Глобального каталога открытия WIS2 (GDC).

В настоящее время доступны следующие GDC:

- Environment and Climate Change Canada, Meteorological Service of Canada: <https://wis2-gdc.weather.gc.ca>
- China Meteorological Administration: <https://gdc.wis.cma.cn>
- Deutscher Wetterdienst: <https://wis2.dwd.de/gdc>

Во время локальных учебных сессий настраивается локальный GDC, чтобы участники могли запрашивать GDC о метаданных, которые они опубликовали из своих экземпляров wis2box. В этом случае тренеры предоставят URL к локальному GDC.

## Подготовка

!!! note
    Перед началом пожалуйста войдите в свою учебную VM.

## Установка pywiscat

Используйте установщик пакетов Python `pip3` для установки pywiscat на вашей VM:
```bash
pip3 install pywiscat
```

!!! note

    Если вы столкнетесь со следующей ошибкой:

    ```
    WARNING: The script pywiscat is installed in '/home/username/.local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
    ```

    Тогда выполните следующую команду:

    ```bash
    export PATH=$PATH:/home/$USER/.local/bin
    ```

    ...где `$USER` это ваше имя пользователя на вашей VM.

Проверьте, что установка прошла успешно:

```bash
pywiscat --version
```

## Поиск данных с помощью pywiscat

По умолчанию pywiscat подключается к Глобальному каталогу открытия Канады. Давайте настроим pywiscat для запроса к учебному GDC, установив переменную среды `PYWISCAT_GDC_URL`:

```bash
export PYWISCAT_GDC_URL=http://gdc.wis2.training:5002
```

Давайте используем [pywiscat](https://github.com/wmo-im/pywiscat) для запроса к GDC, настроенному как часть обучения.

```bash
pywiscat search --help
```

Теперь ищем в GDC все записи:

```bash
pywiscat search
```

!!! question

    Сколько записей возвращается из поиска?

??? success "Нажмите, чтобы увидеть ответ"
    Количество записей зависит от GDC, который вы запрашиваете. При использовании локального учебного GDC вы должны увидеть, что количество записей равно количеству наборов данных, которые были внесены в GDC во время других практических сессий.

Давайте попробуем запросить GDC с ключевым словом:

```bash
pywiscat search -q observations
```

!!! question

    Какова политика данных результатов?

??? success "Нажмите, чтобы увидеть ответ"
    Все возвращенные данные должны указывать на "основные" данные

Попробуйте дополнительные запросы с `-q`

!!! tip

    Флаг `-q` позволяет использовать следующий синтаксис:

    - `-q synop`: найти все записи со словом "synop"
    - `-q temp`: найти все записи со словом "temp"
    - `-q "observations AND oman"`: найти все записи со словами "observations" и "oman"
    - `-q "observations NOT oman"`: найти все записи, содержащие слово "observations", но не "oman"
    - `-q "synop OR temp"`: найти все записи с "synop" или "temp"
    - `-q "obs*"`: нечеткий поиск

    При поиске терминов с пробелами заключайте их в двойные кавычки.

Давайте получим больше деталей о конкретном результате поиска, который нас интересует:

```bash
pywiscat get <id>
```

!!! tip

    Используйте значение `id` из предыдущего поиска.


## Заключение

!!! success "Поздравляем!"

    На этой практической сессии вы научились:

    - использовать pywiscat для обнаружения наборов данных из Глобального каталога открытия WIS2