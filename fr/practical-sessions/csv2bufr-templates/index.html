
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/fr/practical-sessions/csv2bufr-templates/">
      
      
        <link rel="prev" href="../data-conversion-tools/">
      
      
        <link rel="next" href="../adding-gts-headers-to-wis2-notifications/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Modèles de mappage de CSV à BUFR - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modeles-de-mappage-de-csv-a-bufr" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modèles de mappage de CSV à BUFR
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/csv2bufr-templates/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/csv2bufr-templates/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/csv2bufr-templates/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/practical-sessions/csv2bufr-templates/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/csv2bufr-templates/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Aide-mémoire
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Aide-mémoire
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WIS2 in a box cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modèles csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modèles csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modèle DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sessions Pratiques
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sessions Pratiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connexion à WIS2 via MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accéder à votre VM étudiant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initialisation de wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des ensembles de données dans wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration des métadonnées des stations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion des données pour publication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils de Conversion de Données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Modèles de mappage de CSV à BUFR
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Modèles de mappage de CSV à BUFR
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Préparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-dun-modele-de-mappage" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un modèle de mappage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Création d&#39;un modèle de mappage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outil-en-ligne-de-commande-csv2bufr-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Outil en ligne de commande csv2bufr mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-du-modele-de-mappage-dans-le-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle de mappage dans le wis2box
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-du-modele-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle 'AWS'
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation du modèle &#39;AWS&#39;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examen-des-donnees-dentree-de-lexemple-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Examen des données d'entrée de l'exemple aws
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mettre-a-jour-le-fichier-exemple" class="md-nav__link">
    <span class="md-ellipsis">
      Mettre à jour le fichier exemple
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#televerser-les-donnees-sur-minio-et-verifier-le-resultat" class="md-nav__link">
    <span class="md-ellipsis">
      Téléverser les données sur MinIO et vérifier le résultat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-du-modele-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle 'DayCLI'
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation du modèle &#39;DayCLI&#39;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation-dun-ensemble-de-donnees-wis2box-pour-la-publication-des-messages-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un ensemble de données wis2box pour la publication des messages DAYCLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examiner-les-donnees-dentree-de-lexemple-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Examiner les données d'entrée de l'exemple daycli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mettre-a-jour-le-fichier-exemple_1" class="md-nav__link">
    <span class="md-ellipsis">
      Mettre à jour le fichier exemple
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#televerser-les-donnees-sur-minio-et-verifier-le-resultat_1" class="md-nav__link">
    <span class="md-ellipsis">
      Téléverser les données sur MinIO et vérifier le résultat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ajout d'en-têtes GTS aux notifications WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets-with-access-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration d'un jeu de données recommandé
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Télécharger des données depuis WIS2 en utilisant wis2downloader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoding-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Décodage des données à partir des formats binaires de l'OMM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Découverte des ensembles de données depuis le WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Préparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-dun-modele-de-mappage" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un modèle de mappage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Création d&#39;un modèle de mappage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outil-en-ligne-de-commande-csv2bufr-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Outil en ligne de commande csv2bufr mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-du-modele-de-mappage-dans-le-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle de mappage dans le wis2box
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-du-modele-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle 'AWS'
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation du modèle &#39;AWS&#39;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examen-des-donnees-dentree-de-lexemple-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Examen des données d'entrée de l'exemple aws
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mettre-a-jour-le-fichier-exemple" class="md-nav__link">
    <span class="md-ellipsis">
      Mettre à jour le fichier exemple
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#televerser-les-donnees-sur-minio-et-verifier-le-resultat" class="md-nav__link">
    <span class="md-ellipsis">
      Téléverser les données sur MinIO et vérifier le résultat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-du-modele-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation du modèle 'DayCLI'
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilisation du modèle &#39;DayCLI&#39;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creation-dun-ensemble-de-donnees-wis2box-pour-la-publication-des-messages-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Création d'un ensemble de données wis2box pour la publication des messages DAYCLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examiner-les-donnees-dentree-de-lexemple-daycli" class="md-nav__link">
    <span class="md-ellipsis">
      Examiner les données d'entrée de l'exemple daycli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mettre-a-jour-le-fichier-exemple_1" class="md-nav__link">
    <span class="md-ellipsis">
      Mettre à jour le fichier exemple
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#televerser-les-donnees-sur-minio-et-verifier-le-resultat_1" class="md-nav__link">
    <span class="md-ellipsis">
      Téléverser les données sur MinIO et vérifier le résultat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="modeles-de-mappage-de-csv-a-bufr">Modèles de mappage de CSV à BUFR</h1>
<div class="admonition abstract">
<p class="admonition-title">Résultats d'apprentissage</p>
<p>À la fin de cette session pratique, vous serez capable de :</p>
<ul>
<li>créer un nouveau modèle de mappage BUFR pour vos données CSV</li>
<li>éditer et déboguer votre modèle de mappage BUFR personnalisé depuis la ligne de commande</li>
<li>configurer le plugin de données CSV à BUFR pour utiliser un modèle de mappage BUFR personnalisé</li>
<li>utiliser les modèles intégrés AWS et DAYCLI pour convertir des données CSV en BUFR</li>
</ul>
</div>
<h2 id="introduction">Introduction</h2>
<p>Les fichiers de données à valeurs séparées par des virgules (CSV) sont souvent utilisés pour enregistrer des données observationnelles et autres dans un format tabulaire.
La plupart des enregistreurs de données utilisés pour enregistrer la sortie des capteurs sont capables d'exporter les observations dans des fichiers délimités, y compris en CSV.
De même, lorsque les données sont ingérées dans une base de données, il est facile d'exporter les données requises dans des fichiers formatés CSV.</p>
<p>Le module csv2bufr de wis2box fournit un outil en ligne de commande pour convertir les données CSV en format BUFR. Lorsque vous utilisez csv2bufr, vous devez fournir un modèle de mappage BUFR qui mappe les colonnes CSV aux éléments BUFR correspondants. Si vous ne souhaitez pas créer votre propre modèle de mappage, vous pouvez utiliser les modèles intégrés AWS et DAYCLI pour convertir des données CSV en BUFR, mais vous devrez vous assurer que les données CSV que vous utilisez sont dans le format correct pour ces modèles. Si vous souhaitez décoder des paramètres qui ne sont pas inclus dans les modèles AWS et DAYCLI, vous devrez créer votre propre modèle de mappage.</p>
<p>Dans cette session, vous apprendrez à créer votre propre modèle de mappage pour convertir des données CSV en BUFR. Vous apprendrez également à utiliser les modèles intégrés AWS et DAYCLI pour convertir des données CSV en BUFR.</p>
<h2 id="preparation">Préparation</h2>
<p>Assurez-vous que la pile wis2box a été démarrée avec <code>python3 wis2box.py start</code></p>
<p>Assurez-vous que vous avez un navigateur web ouvert avec l'interface utilisateur MinIO pour votre instance en allant à <code>http://YOUR-HOST:9000</code>
Si vous ne vous souvenez pas de vos identifiants MinIO, vous pouvez les trouver dans le fichier <code>wis2box.env</code> dans le répertoire <code>wis2box</code> sur votre VM étudiant.</p>
<p>Assurez-vous que vous avez MQTT Explorer ouvert et connecté à votre courtier en utilisant les identifiants <code>everyone/everyone</code>.</p>
<h2 id="creation-dun-modele-de-mappage">Création d'un modèle de mappage</h2>
<p>Le module csv2bufr est livré avec un outil en ligne de commande pour créer votre propre modèle de mappage en utilisant un ensemble de séquences BUFR et/ou d'élément BUFR en entrée.</p>
<p>Pour trouver des séquences et des éléments BUFR spécifiques, vous pouvez vous référer aux tables BUFR à <a href="https://confluence.ecmwf.int/display/ECC/BUFR+tables">https://confluence.ecmwf.int/display/ECC/BUFR+tables</a>.</p>
<h3 id="outil-en-ligne-de-commande-csv2bufr-mappings">Outil en ligne de commande csv2bufr mappings</h3>
<p>Pour accéder à l'outil en ligne de commande csv2bufr, vous devez vous connecter au conteneur wis2box-api :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2box-api
</code></pre></div>
<p>Pour afficher la page d'aide de la commande <code>csv2bufr mapping</code> :</p>
<div class="highlight"><pre><span></span><code>csv2bufr<span class="w"> </span>mappings<span class="w"> </span>--help
</code></pre></div>
<p>La page d'aide montre 2 sous-commandes :</p>
<ul>
<li><code>csv2bufr mappings create</code> : Créer un nouveau modèle de mappage</li>
<li><code>csv2bufr mappings list</code> : Lister les modèles de mappage disponibles dans le système</li>
</ul>
<div class="admonition note">
<p class="admonition-title">liste de mappage csv2bufr</p>
<p>La commande <code>csv2bufr mapping list</code> vous montrera les modèles de mappage disponibles dans le système.
Les modèles par défaut sont stockés dans le répertoire <code>/opt/wis2box/csv2bufr/templates</code> dans le conteneur.</p>
<p>Pour partager des modèles de mappage personnalisés avec le système, vous pouvez les stocker dans le répertoire défini par <code>$CSV2BUFR_TEMPLATES</code>, qui est défini sur <code>/data/wis2box/mappings</code> par défaut dans le conteneur. Étant donné que le répertoire <code>/data/wis2box/mappings</code> dans le conteneur est monté sur le répertoire <code>$WIS2BOX_HOST_DATADIR/mappings</code> sur l'hôte, vous trouverez vos modèles de mappage personnalisés dans le répertoire <code>$WIS2BOX_HOST_DATADIR/mappings</code> sur l'hôte.</p>
</div>
<p>Essayons de créer un nouveau modèle de mappage personnalisé en utilisant la commande <code>csv2bufr mapping create</code> en utilisant comme entrée la séquence BUFR 301150 plus l'élément BUFR 012101.</p>
<div class="highlight"><pre><span></span><code>csv2bufr<span class="w"> </span>mappings<span class="w"> </span>create<span class="w"> </span><span class="m">301150</span><span class="w"> </span><span class="m">012101</span><span class="w"> </span>--output<span class="w"> </span>/data/wis2box/mappings/my_custom_template.json
</code></pre></div>
<p>Vous pouvez vérifier le contenu du modèle de mappage que vous venez de créer en utilisant la commande <code>cat</code> :</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/data/wis2box/mappings/my_custom_template.json
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Inspection du modèle de mappage</p>
<p>Combien de colonnes CSV sont mappées aux éléments BUFR ? Quel est l'en-tête CSV pour chaque élément BUFR mappé ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Le modèle de mappage que vous avez créé mappe <strong>5</strong> colonnes CSV aux éléments BUFR, à savoir les 4 éléments BUFR de la séquence 301150 plus l'élément BUFR 012101. </p>
<p>Les colonnes CSV suivantes sont mappées aux éléments BUFR :</p>
<ul>
<li><strong>wigosIdentifierSeries</strong> mappe à <code>"eccodes_key": "#1#wigosIdentifierSeries"</code> (élément BUFR 001125)</li>
<li><strong>wigosIssuerOfIdentifier</strong> mappe à <code>"eccodes_key": "#1#wigosIssuerOfIdentifier</code> (élément BUFR 001126)</li>
<li><strong>wigosIssueNumber</strong> mappe à <code>"eccodes_key": "#1#wigosIssueNumber"</code> (élément BUFR 001127)</li>
<li><strong>wigosLocalIdentifierCharacter</strong> mappe à <code>"eccodes_key": "#1#wigosLocalIdentifierCharacter"</code> (élément BUFR 001128)</li>
<li><strong>airTemperature</strong> mappe à <code>"eccodes_key": "#1#airTemperature"</code> (élément BUFR 012101)</li>
</ul>
</details>
<p>Le modèle de mappage que vous avez créé omet des métadonnées importantes sur l'observation effectuée, la date et l'heure de l'observation, et la latitude et la longitude de la station.</p>
<p>Ensuite, nous mettrons à jour le modèle de mappage et ajouterons les séquences suivantes :</p>
<ul>
<li><strong>301011</strong> pour la date (année, mois, jour)</li>
<li><strong>301012</strong> pour l'heure (heure, minute)</li>
<li><strong>301023</strong> pour l'emplacement (latitude/longitude (précision grossière))</li>
</ul>
<p>Et les éléments suivants :</p>
<ul>
<li><strong>010004</strong> pour la pression</li>
<li><strong>007031</strong> pour la hauteur du baromètre au-dessus du niveau moyen de la mer</li>
</ul>
<p>Exécutez la commande suivante pour mettre à jour le modèle de mappage :</p>
<div class="highlight"><pre><span></span><code>csv2bufr<span class="w"> </span>mappings<span class="w"> </span>create<span class="w"> </span><span class="m">301150</span><span class="w"> </span><span class="m">301011</span><span class="w"> </span><span class="m">301012</span><span class="w"> </span><span class="m">301023</span><span class="w"> </span><span class="m">007031</span><span class="w"> </span><span class="m">012101</span><span class="w"> </span><span class="m">010004</span><span class="w">  </span>--output<span class="w"> </span>/data/wis2box/mappings/my_custom_template.json
</code></pre></div>
<p>Et inspectez à nouveau le contenu du modèle de mappage :</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/data/wis2box/mappings/my_custom_template.json
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Inspection du modèle de mappage mis à jour</p>
<p>Combien de colonnes CSV sont maintenant mappées aux éléments BUFR ? Quel est l'en-tête CSV pour chaque élément BUFR mappé ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Le modèle de mappage que vous avez créé mappe maintenant <strong>18</strong> colonnes CSV aux éléments BUFR :
- 4 éléments BUFR de la séquence BUFR 301150
- 3 éléments BUFR de la séquence BUFR 301011
- 2 éléments BUFR de la séquence BUFR 301012
- 2 éléments BUFR de la séquence BUFR 301023
- élément BUFR 007031
- élément BUFR 012101</p>
<p>Les colonnes CSV suivantes sont mappées aux éléments BUFR :</p>
<ul>
<li><strong>wigosIdentifierSeries</strong> mappe à <code>"eccodes_key": "#1#wigosIdentifierSeries"</code> (élément BUFR 001125)</li>
<li><strong>wigosIssuerOfIdentifier</strong> mappe à <code>"eccodes_key": "#1#wigosIssuerOfIdentifier</code> (élément BUFR 001126)</li>
<li><strong>wigosIssueNumber</strong> mappe à <code>"eccodes_key": "#1#wigosIssueNumber"</code> (élément BUFR 001127)</li>
<li><strong>wigosLocalIdentifierCharacter</strong> mappe à <code>"eccodes_key": "#1#wigosLocalIdentifierCharacter"</code> (élément BUFR 001128)</li>
<li><strong>year</strong> mappe à <code>"eccodes_key": "#1#year"</code> (élément BUFR 004001)</li>
<li><strong>month</strong> mappe à <code>"eccodes_key": "#1#month"</code> (élément BUFR 004002)</li>
<li><strong>day</strong> mappe à <code>"eccodes_key": "#1#day"</code> (élément BUFR 004003)</li>
<li><strong>hour</strong> mappe à <code>"eccodes_key": "#1#hour"</code> (élément BUFR 004004)</li>
<li><strong>minute</strong> mappe à <code>"eccodes_key": "#1#minute"</code> (élément BUFR 004005)</li>
<li><strong>latitude</strong> mappe à <code>"eccodes_key": "#1#latitude"</code> (élément BUFR 005002)</li>
<li><strong>longitude</strong> mappe à <code>"eccodes_key": "#1#longitude"</code> (élément BUFR 006002)</li>
<li><strong>heightOfBarometerAboveMeanSeaLevel"</strong> mappe à <code>"eccodes_key": "#1#heightOfBarometerAboveMeanSeaLevel"</code> (élément BUFR 007031)</li>
<li><strong>airTemperature</strong> mappe à <code>"eccodes_key": "#1#airTemperature"</code> (élément BUFR 012101)</li>
<li><strong>nonCoordinatePressure</strong> mappe à <code>"eccodes_key": "#1#nonCoordinatePressure"</code> (élément BUFR 010004)</li>
</ul>
</details>
<p>Vérifiez le contenu du fichier <code>custom_template_data.csv</code> dans le répertoire <code>/root/data-conversion-exercises</code> :</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/root/data-conversion-exercises/custom_template_data.csv
</code></pre></div>
<p>Notez que les en-têtes de ce fichier CSV sont les mêmes que les en-têtes CSV dans le modèle de mappage que vous avez créé.</p>
<p>Pour tester la conversion des données, nous pouvons utiliser l'outil en ligne de commande <code>csv2bufr</code> pour convertir le fichier CSV en BUFR en utilisant le modèle de mappage que nous avons créé :</p>
<div class="highlight"><pre><span></span><code>csv2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--bufr-template<span class="w"> </span>my_custom_template<span class="w"> </span>/root/data-conversion-exercises/custom_template_data.csv
</code></pre></div>
<p>Vous devriez voir la sortie suivante :</p>
<div class="highlight"><pre><span></span><code>CLI:<span class="w">    </span>...<span class="w"> </span>Transforming<span class="w"> </span>/root/data-conversion-exercises/custom_template_data.csv<span class="w"> </span>to<span class="w"> </span>BUFR<span class="w"> </span>...
CLI:<span class="w">    </span>...<span class="w"> </span>Processing<span class="w"> </span>subsets:
CLI:<span class="w">    </span>.....<span class="w"> </span><span class="m">94</span><span class="w"> </span>bytes<span class="w"> </span>written<span class="w"> </span>to<span class="w"> </span>./WIGOS_0-20000-0-15015_20250412T210000.bufr4
CLI:<span class="w">    </span>End<span class="w"> </span>of<span class="w"> </span>processing,<span class="w"> </span>exiting.
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Vérifiez le contenu du fichier BUFR</p>
<p>Comment pouvez-vous vérifier le contenu du fichier BUFR que vous venez de créer et vérifier qu'il a codé les données correctement ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Vous pouvez utiliser la commande <code>bufr_dump -p</code> pour vérifier le contenu du fichier BUFR que vous venez de créer.
La commande vous montrera le contenu du fichier BUFR dans un format lisible par l'homme.</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>./WIGOS_0-20000-0-15015_20250412T210000.bufr4
</code></pre></div>
<p>Dans la sortie, vous verrez des valeurs pour les éléments BUFR que vous avez mappés dans le modèle, par exemple la "température de l'air" affichera :</p>
<div class="highlight"><pre><span></span><code><span class="nv">airTemperature</span><span class="o">=</span><span class="m">298</span>.15
</code></pre></div>
</details>
<p>Vous pouvez maintenant quitter le conteneur :</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h3 id="utilisation-du-modele-de-mappage-dans-le-wis2box">Utilisation du modèle de mappage dans le wis2box</h3>
<p>Pour vous assurer que le nouveau modèle de mappage est reconnu par le conteneur wis2box-api, vous devez redémarrer le conteneur :</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>restart<span class="w"> </span>wis2box-api
</code></pre></div>
<p>Vous pouvez maintenant configurer votre jeu de données dans le wis2box-webapp pour utiliser le modèle de mappage personnalisé pour le plugin de conversion CSV en BUFR.</p>
<p>Le wis2box-webapp détectera automatiquement le modèle de mappage que vous avez créé et le rendra disponible dans la liste des modèles pour le plugin de conversion CSV en BUFR.</p>
<p>Cliquez sur le jeu de données que vous avez créé lors de la session pratique précédente et cliquez sur "MISE À JOUR" à côté du plugin avec le nom "Données CSV converties en BUFR" :</p>
<p><img alt="Image montrant l'éditeur de jeu de données dans le wis2box-webapp" src="/../assets/img/wis2box-webapp-data-mapping-update-csv2bufr.png"/></p>
<p>Vous devriez voir le nouveau modèle que vous avez créé dans la liste des modèles disponibles :</p>
<p><img alt="Image montrant les modèles csv2bufr dans le wis2box-webapp" src="/../assets/img/wis2box-webapp-csv2bufr-templates.png"/></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Notez que si vous ne voyez pas le nouveau modèle que vous avez créé, essayez de rafraîchir la page ou de l'ouvrir dans une nouvelle fenêtre en mode incognito.</p>
</div>
<p>Pour l'instant, conservez la sélection par défaut du modèle AWS (cliquez en haut à droite pour fermer la configuration du plugin).</p>
<h2 id="utilisation-du-modele-aws">Utilisation du modèle 'AWS'</h2>
<p>Le modèle 'AWS' fournit un modèle de mappage pour convertir des données CSV en séquence BUFR 301150, 307096, en soutien aux exigences minimales du GBON.</p>
<p>La description du modèle AWS peut être trouvée ici <a href="../../csv2bufr-templates/aws-template/">modèle aws</a>.</p>
<h3 id="examen-des-donnees-dentree-de-lexemple-aws">Examen des données d'entrée de l'exemple aws</h3>
<p>Téléchargez l'exemple pour cet exercice à partir du lien ci-dessous :</p>
<p><a href="../../../sample-data/aws-example.csv">aws-example.csv</a></p>
<p>Ouvrez le fichier que vous avez téléchargé dans un éditeur et inspectez le contenu :</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>En examinant les champs de date, d'heure et d'identité (identifiants WIGOS et traditionnels), que remarquez-vous ? Comment la date d'aujourd'hui serait-elle représentée ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Chaque colonne contient une seule information. Par exemple, la date est divisée en
année, mois et jour, reflétant la façon dont les données sont stockées dans le BUFR. La date d'aujourd'hui serait 
divisée entre les colonnes "année", "mois" et "jour". De même, l'heure doit être
divisée en "heure" et "minute" et l'identifiant de la station WIGOS en ses composants respectifs.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>En regardant le fichier de données, comment les données manquantes sont-elles codées ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Les données manquantes dans le fichier sont représentées par des cellules vides. Dans un fichier CSV, cela serait codé par <code>,,</code>. Notez qu'il s'agit d'une cellule vide et non codée comme une chaîne de longueur zéro, 
par exemple <code>,"",</code>.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Données manquantes</p>
<p>Il est reconnu que les données peuvent manquer pour diverses raisons, que ce soit en raison d'une défaillance du capteur ou du paramètre non observé. Dans ces cas, les données manquantes peuvent être codées comme indiqué ci-dessus, les autres données du rapport restent valides.</p>
</div>
<h3 id="mettre-a-jour-le-fichier-exemple">Mettre à jour le fichier exemple</h3>
<p>Mettez à jour le fichier exemple que vous avez téléchargé pour utiliser la date et l'heure d'aujourd'hui et changez les identifiants de station WIGOS pour utiliser les stations que vous avez enregistrées dans le <code>wis2box-webapp</code>.</p>
<h3 id="televerser-les-donnees-sur-minio-et-verifier-le-resultat">Téléverser les données sur MinIO et vérifier le résultat</h3>
<p>Naviguez vers l'interface utilisateur de MinIO et connectez-vous en utilisant les identifiants du fichier <code>wis2box.env</code>.</p>
<p>Naviguez vers le <strong>wis2box-incoming</strong> et cliquez sur le bouton "Créer un nouveau chemin" :</p>
<p><img alt="Image montrant l'interface utilisateur de MinIO avec le bouton de création de dossier en surbrillance" src="/../assets/img/minio-create-new-path.png"/></p>
<p>Créez un nouveau dossier dans le seau MinIO qui correspond à l'identifiant de l'ensemble de données que vous avez créé avec le modèle='weather/surface-weather-observations/synop' :</p>
<p><img alt="Image montrant l'interface utilisateur de MinIO avec le bouton de création de dossier en surbrillance" src="/../assets/img/minio-create-new-path-metadata_id.png"/></p>
<p>Téléversez le fichier exemple que vous avez téléchargé dans le dossier que vous avez créé dans le seau MinIO :</p>
<p><img alt="Image montrant l'interface utilisateur de MinIO avec aws-example téléversé" src="/../assets/img/minio-upload-aws-example.png"/></p>
<p>Vérifiez le tableau de bord Grafana à <code>http://YOUR-HOST:3000</code> pour voir s'il y a des AVERTISSEMENTS ou des ERREURS. Si vous en voyez, essayez de les corriger et répétez l'exercice.</p>
<p>Vérifiez le MQTT Explorer pour voir si vous recevez des notifications de données WIS2.</p>
<p>Si vous avez réussi à ingérer les données, vous devriez voir 3 notifications dans MQTT Explorer sur le sujet <code>origin/a/wis2/&lt;centre-id&gt;/data/weather/surface-weather-observations/synop</code> pour les 3 stations pour lesquelles vous avez rapporté des données :</p>
<p><img width="450" alt="Image montrant MQTT Explorer après le téléversement AWS" src="/../assets/img/mqtt-explorer-aws-upload.png"/></p>
<h2 id="utilisation-du-modele-daycli">Utilisation du modèle 'DayCLI'</h2>
<p>Le modèle <strong>DayCLI</strong> fournit un modèle de mappage pour convertir les données CSV climatiques quotidiennes en séquence BUFR 307075, en soutien à la déclaration des données climatiques quotidiennes.</p>
<p>La description du modèle DAYCLI peut être trouvée ici <a href="../../csv2bufr-templates/daycli-template/">daycli-template</a>.</p>
<p>Pour partager ces données sur WIS2, vous devrez créer un nouvel ensemble de données dans le <code>wis2box-webapp</code> qui a la bonne hiérarchie de sujets WIS2 et qui utilise le modèle DAYCLI pour convertir les données CSV en BUFR.</p>
<h3 id="creation-dun-ensemble-de-donnees-wis2box-pour-la-publication-des-messages-daycli">Création d'un ensemble de données wis2box pour la publication des messages DAYCLI</h3>
<p>Allez à l'éditeur d'ensembles de données dans le <code>wis2box-webapp</code> et créez un nouvel ensemble de données. Utilisez le même centre-id que dans les sessions pratiques précédentes et sélectionnez <strong>Data Type='climate/surface-based-observations/daily'</strong> :</p>
<p><img alt="Créer un nouvel ensemble de données dans le wis2box-webapp pour DAYCLI" src="/../assets/img/wis2box-webapp-create-dataset-daycli.png"/></p>
<p>Cliquez sur "CONTINUER VERS LE FORMULAIRE" et ajoutez une description pour votre ensemble de données, définissez la zone de délimitation et fournissez les informations de contact pour l'ensemble de données. Une fois que vous avez rempli toutes les sections, cliquez sur 'VALIDER LE FORMULAIRE' et vérifiez le formulaire.</p>
<p>Examinez les plugins de données pour les ensembles de données. Cliquez sur "MISE À JOUR" à côté du plugin avec le nom "Données CSV converties en BUFR" et vous verrez que le modèle est réglé sur <strong>DayCLI</strong> :</p>
<p><img alt="Mettre à jour le plugin de données pour l'ensemble de données pour utiliser le modèle DAYCLI" src="/../assets/img/wis2box-webapp-update-data-plugin-daycli.png"/></p>
<p>Fermez la configuration du plugin et soumettez le formulaire en utilisant le jeton d'authentification que vous avez créé lors de la session pratique précédente.</p>
<p>Vous devriez maintenant avoir un second ensemble de données dans le <code>wis2box-webapp</code> qui est configuré pour utiliser le modèle DAYCLI pour convertir les données CSV en BUFR.</p>
<h3 id="examiner-les-donnees-dentree-de-lexemple-daycli">Examiner les données d'entrée de l'exemple daycli</h3>
<p>Téléchargez l'exemple pour cet exercice à partir du lien ci-dessous :</p>
<p><a href="../../../sample-data/daycli-example.csv">daycli-example.csv</a></p>
<p>Ouvrez le fichier que vous avez téléchargé dans un éditeur et inspectez le contenu :</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Quelles variables supplémentaires sont incluses dans le modèle daycli ?</p>
</div>
<details class="success">
<summary>Cliquez pour révéler la réponse</summary>
<p>Le modèle daycli inclut des métadonnées importantes sur l'emplacement des instruments et les classifications de la qualité des mesures pour la température et l'humidité, les drapeaux de contrôle de qualité et les informations sur la façon dont la température moyenne quotidienne a été calculée.</p>
</details>
<h3 id="mettre-a-jour-le-fichier-exemple_1">Mettre à jour le fichier exemple</h3>
<p>Le fichier exemple contient une ligne de données pour chaque jour d'un mois et rapporte des données pour une station. Mettez à jour le fichier exemple que vous avez téléchargé pour utiliser la date et l'heure d'aujourd'hui et changez les identifiants de station WIGOS pour utiliser une station que vous avez enregistrée dans le <code>wis2box-webapp</code>.</p>
<h3 id="televerser-les-donnees-sur-minio-et-verifier-le-resultat_1">Téléverser les données sur MinIO et vérifier le résultat</h3>
<p>Comme auparavant, vous devrez téléverser les données dans le seau 'wis2box-incoming' de MinIO pour être traitées par le convertisseur csv2bufr. Cette fois, vous devrez créer un nouveau dossier dans le seau MinIO qui correspond à l'identifiant de l'ensemble de données que vous avez créé avec le modèle='climate/surface-based-observations/daily' qui sera différent de l'identifiant de l'ensemble de données que vous avez utilisé dans l'exercice précédent :</p>
<p><img alt="Image montrant l'interface utilisateur de MinIO avec DAYCLI-example téléversé" src="/../assets/img/minio-upload-daycli-example.png"/></p>
<p>Après avoir téléversé les données, vérifiez qu'il n'y a pas d'AVERTISSEMENTS ou d'ERREURS dans le tableau de bord Grafana et vérifiez le MQTT Explorer pour voir si vous recevez des notifications de données WIS2.</p>
<p>Si vous avez réussi à ingérer les données, vous devriez voir 30 notifications dans MQTT Explorer sur le sujet <code>origin/a/wis2/&lt;centre-id&gt;/data/climate/surface-based-observations/daily</code> pour les 30 jours du mois pour lesquels vous avez rapporté des données :</p>
<p><img width="450" alt="Image montrant MQTT Explorer après le téléversement DAYCLI" src="/../assets/img/mqtt-daycli-template-success.png"/></p>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Félicitations</p>
<p>Dans cette session pratique, vous avez appris :</p>
<ul>
<li>comment créer un modèle de mappage personnalisé pour convertir les données CSV en BUFR</li>
<li>comment utiliser les modèles intégrés AWS et DAYCLI pour convertir les données CSV en BUFR</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>