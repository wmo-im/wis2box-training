
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://training.wis2box.wis.wmo.int/ru/practical-sessions/datasets-with-access-control/">
      
      
        <link rel="prev" href="../adding-gts-headers-to-wis2-notifications/">
      
      
        <link rel="next" href="../downloading-data-from-wis2/">
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Настройка рекомендованного набора данных - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../../" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Настройка рекомендованного набора данных
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../practical-sessions/datasets-with-access-control/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/practical-sessions/datasets-with-access-control/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/practical-sessions/datasets-with-access-control/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../zh/practical-sessions/datasets-with-access-control/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ar/practical-sessions/datasets-with-access-control/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Главная
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Практические занятия
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Практические занятия
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Подключение к WIS2 через MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accessing-your-student-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Доступ к вашей учебной виртуальной машине
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initializing-wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Инициализация wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2box-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Настройка наборов данных в wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Настройка метаданных станции
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingesting-data-for-publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Загрузка данных для публикации
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-conversion-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Инструменты преобразования данных
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv2bufr-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шаблоны преобразования CSV в BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Добавление заголовков GTS в уведомления WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Настройка рекомендованного набора данных
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Настройка рекомендованного набора данных
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      Введение
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      Подготовка
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Создание нового набора данных с политикой данных 'recommended'
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-api" class="md-nav__link">
    <span class="md-ellipsis">
      Просмотр нового набора данных в wis2box-api
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление файла лицензии в ваш экземпляр wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление токена доступа к набору данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      Публикация данных в набор данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление токена доступа в HTTP-заголовки для доступа к набору данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Удаление токена доступа из набора данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      Заключение
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Загрузка данных из WIS2 с использованием wis2downloader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decoding-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Декодирование данных из бинарных форматов ВМО
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Обнаружение наборов данных из WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Шаблоны csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Шаблоны csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шаблон AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шаблон DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Шпаргалки
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Шпаргалки
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шпаргалка по Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шпаргалка по Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Шпаргалка WIS2 in a box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      Введение
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      Подготовка
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Создание нового набора данных с политикой данных 'recommended'
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box-api" class="md-nav__link">
    <span class="md-ellipsis">
      Просмотр нового набора данных в wis2box-api
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление файла лицензии в ваш экземпляр wis2box
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление токена доступа к набору данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      Публикация данных в набор данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-" class="md-nav__link">
    <span class="md-ellipsis">
      Добавление токена доступа в HTTP-заголовки для доступа к набору данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Удаление токена доступа из набора данных
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      Заключение
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">Настройка рекомендованного набора данных</h1>
<div class="admonition abstract">
<p class="admonition-title">Результаты обучения</p>
<p>К концу этой практической сессии вы сможете:</p>
<ul>
<li>создать новый набор данных с политикой данных 'recommended'</li>
<li>добавить токен доступа к набору данных</li>
<li>проверить, что доступ к набору данных невозможен без токена доступа</li>
<li>добавить токен доступа в HTTP-заголовки для доступа к набору данных</li>
<li>добавить пользовательский файл лицензии, размещенный на вашем экземпляре wis2box</li>
</ul>
</div>
<h2 id="_2">Введение</h2>
<p>Данные в WIS2 распространяются в соответствии с Единой политикой данных ВМО (WMO Unified Data Policy), которая определяет две категории данных.</p>
<p><strong>core</strong>: данные, предоставляемые на бесплатной и неограниченной основе, без оплаты и без условий использования</p>
<p><strong>recommended</strong>: данные, которые могут предоставляться с условиями использования и/или подлежать лицензированию</p>
<p>Данные, распространяемые как recommended:</p>
<ul>
<li>могут быть предоставлены с условиями использования и повторного использования</li>
<li>могут иметь контроль доступа к данным</li>
<li>не кэшируются WIS2 Global Caches</li>
<li>должны иметь метаданные, включающие URL лицензии</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Загрузка рекомендованных данных</p>
<p>Поскольку WIS Global Caches не кэшируют рекомендованные данные, вы <strong>не</strong> увидите уведомлений по теме <code>cache/a/wis2/&lt;centre-id&gt;/data/recommended/..</code></p>
<p>Потребитель данных должен загружать данные с сервера данных, размещенного поставщиком данных, используя канонический URL, предоставленный в уведомлениях по теме <code>origin/a/wis2/&lt;centre-id&gt;/data/recommended/...</code></p>
</div>
<p>В этой практической сессии вы создадите новый набор данных с политикой данных 'recommended', используя редактор наборов данных в wis2box-webapp. Вы также узнаете, как предоставить самозахостированную лицензию и, при необходимости, добавить контроль доступа.</p>
<div class="admonition note">
<p class="admonition-title">Данные авиации в WIS2</p>
<p>В этом упражнении вам предлагается создать набор данных для обмена данными METAR, стандартным форматом для отчетов об авиационных метеорологических наблюдениях.</p>
<p>Данные авиации в WIS2 всегда должны распространяться как 'recommended', чтобы соответствовать правилам обмена авиационными данными, установленным Международной организацией гражданской авиации (ICAO).</p>
</div>
<h2 id="_3">Подготовка</h2>
<p>Убедитесь, что у вас есть доступ по SSH к вашей виртуальной машине студента и что ваш экземпляр wis2box запущен и работает.</p>
<p>Убедитесь, что вы подключены к брокеру MQTT вашего экземпляра wis2box, используя MQTT Explorer. Вы можете использовать публичные учетные данные <code>everyone/everyone</code> для подключения к брокеру.</p>
<p>Убедитесь, что у вас открыт веб-браузер с wis2box-webapp для вашего экземпляра, перейдя по адресу <code>http://YOUR-HOST/wis2box-webapp</code>.</p>
<h2 id="recommended">Создание нового набора данных с политикой данных 'recommended'</h2>
<p>Перейдите на страницу 'dataset editor' в wis2box-webapp и создайте новый набор данных.</p>
<p>Для "Centre ID" используйте тот же идентификатор, что и в предыдущих практических сессиях.</p>
<p>Выберите Template = 'other', чтобы указать, что вы не будете использовать предопределенный шаблон для набора данных:</p>
<p><img alt="create-dataset-recommended" src="/../assets/img/create-dataset-template-other.png" width="500"></p>
<p>Нажмите 'CONTINUE TO FORM', чтобы продолжить.</p>
<p>Для этого упражнения создайте набор данных для авиационных данных METAR:</p>
<ul>
<li>выберите подходящий 'Local ID' для набора данных, например 'aviation-metar'</li>
<li>укажите заголовок и описание для набора данных</li>
<li>выберите WMO Data Policy = 'recommended'</li>
</ul>
<p><img alt="create-dataset-recommended" src="/../assets/img/create-dataset-aviation-metar-example.png" width="800"></p>
<p>Обратите внимание, что при выборе WMO Data Policy = 'recommended' редактор наборов данных автоматически добавляет поле для 'License URL', которое является обязательным для рекомендованных наборов данных.</p>
<p>Далее:</p>
<ul>
<li>Используйте <code>WIS2BOX_URL/data/aviation-license.html</code>, чтобы указать на пользовательский файл лицензии, размещенный на вашем экземпляре, заменив <code>WIS2BOX_URL</code> на URL вашего экземпляра wis2box.</li>
<li>Выберите 'Sub Disciple Topic' = 'aviation/metar', чтобы определить правильную тему для этого набора данных.</li>
</ul>
<p><img alt="create-dataset-license-url" src="../../../assets/img/create-dataset-license-custom.png" /></p>
<div class="admonition note">
<p class="admonition-title">О URL лицензии</p>
<p>URL лицензии, связанный с рекомендованным набором данных, информирует потребителей данных об условиях использования данных.</p>
<p>Вы можете использовать URL, указывающий на файл лицензии, размещенный на вашем экземпляре wis2box, или URL, указывающий на файл лицензии, размещенный на внешнем веб-сайте.</p>
<p>Для этого упражнения мы будем использовать самозахостированный файл лицензии. Вы добавите файл 'aviation-license.html' в ваш экземпляр wis2box позже в этой практической сессии, чтобы убедиться, что URL лицензии действителен.</p>
</div>
<p>Поскольку вы выбрали Template = 'other', ключевые слова для набора данных не заполняются автоматически. Добавьте минимум 3 ключевых слова, относящихся к набору данных:</p>
<p><img alt="create-dataset-metar-keywords" src="../../../assets/img/create-dataset-metar-keywords.png" /></p>
<p>Продолжите заполнять обязательные поля для пространственных свойств и контактной информации. Нажмите 'Validate form', чтобы проверить, что все обязательные поля заполнены.</p>
<p>Поскольку вы выбрали Template = 'other', сопоставления набора данных не определены.</p>
<p>Добавьте плагин для 'Universal data without conversion' и убедитесь, что расширение файла установлено в <code>.txt</code>, чтобы соответствовать файлам данных METAR, которые вы будете публиковать в этот набор данных позже в этой практической сессии:</p>
<p><img alt="create-dataset-plugin-universal-txt" src="../../../assets/img/create-dataset-plugin-universal-txt.png" /></p>
<p>Отправьте набор данных, используя ранее созданный токен аутентификации, и убедитесь, что новый набор данных создан в wis2box-webapp.</p>
<p>Проверьте MQTT Explorer, чтобы убедиться, что вы получили уведомление WIS2 о новом метаданных по теме <code>origin/a/wis2/&lt;your-centre-id&gt;/metadata</code>.</p>
<h2 id="wis2box-api">Просмотр нового набора данных в wis2box-api</h2>
<p>Просмотрите список наборов данных в wis2box-api, открыв URL <code>WIS2BOX_URL/oapi/collections/discovery-metadata/items</code> в вашем веб-браузере, заменив <code>WIS2BOX_URL</code> на URL вашего экземпляра wis2box.</p>
<p>Откройте ссылку на только что созданный набор данных и прокрутите вниз до раздела 'links' в JSON-ответе:</p>
<p><img alt="wis2box-api-recommended-dataset-links" src="/../assets/img/wis2box-api-recommended-dataset-links.png" width="600"></p>
<p>Вы должны увидеть ссылку "License for this dataset", указывающую на URL, предоставленный в редакторе наборов данных.</p>
<p>Если вы нажмете на ссылку, вы получите ошибку, так как файл лицензии еще не добавлен в ваш экземпляр wis2box.</p>
<h2 id="wis2box">Добавление файла лицензии в ваш экземпляр wis2box</h2>
<p>Убедитесь, что ссылка "License for this dataset" в метаданных вашего рекомендованного набора данных работает как ожидается.</p>
<p>Скачайте этот пример файла лицензии для авиации: <a href="../../../sample-data/aviation-license.html">aviation-license.html</a></p>
<div class="admonition note">
<p class="admonition-title">О примерном файле лицензии для авиации</p>
<p>Это пример файла лицензии для авиационных данных. Вы можете отредактировать файл, чтобы включить информацию, относящуюся к вашей организации.</p>
</div>
<p>Чтобы загрузить этот файл, используйте MinIO Console, доступный на порту 9001 вашего экземпляра wis2box, открыв веб-браузер и перейдя по адресу <code>http://YOUR-HOST:9001</code>.</p>
<p>Учетные данные для доступа к MinIO Console определены в файле <code>wis2box.env</code> переменными окружения <code>WIS2BOX_STORAGE_USERNAME</code> и <code>WIS2BOX_STORAGE_PASSWORD</code>.</p>
<p>Вы можете найти их в файле <code>wis2box.env</code>, выполнив следующие команды:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>wis2box.env<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>WIS2BOX_STORAGE_USERNAME
cat<span class="w"> </span>wis2box.env<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>WIS2BOX_STORAGE_PASSWORD
</code></pre></div>
<p>После входа в MinIO Console загрузите файл лицензии в базовый путь корзины <strong>wis2box-public</strong>, используя кнопку "Upload":</p>
<p><img alt="minio-upload-license" src="/../assets/img/minio-upload-license.png" width="800"></p>
<p>После загрузки файла лицензии проверьте, доступен ли файл, перейдя по адресу <code>WIS2BOX_URL/data/aviation-license.html</code> в вашем веб-браузере, заменив <code>WIS2BOX_URL</code> на URL вашего экземпляра wis2box.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Веб-прокси в wis2box проксирует все файлы, хранящиеся в корзине "wis2box-public", под путем <code>WIS2BOX_URL/data/</code>.</p>
</div>
<p>Ссылка "License for this dataset", включенная в метаданные вашего рекомендованного набора данных, теперь должна работать как ожидается.</p>
<h2 id="_4">Добавление токена доступа к набору данных</h2>
<p>Войдите в контейнер wis2box-management:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Из командной строки внутри контейнера вы можете защитить набор данных, используя команду <code>wis2box auth add-token</code>, указав флаг <code>--metadata-id</code> для задания идентификатора метаданных набора данных и токен доступа в качестве аргумента.</p>
<p>Например, чтобы добавить токен доступа <code>S3cr3tT0k3n</code> к набору данных с идентификатором метаданных <code>urn:wmo:md:my-centre-id:core.surface-based-observations.synop</code>:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:my-centre-id:aviation-metar<span class="w"> </span>S3cr3tT0k3n
</code></pre></div>
<p>Выйдите из контейнера wis2box-management:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h2 id="_5">Публикация данных в набор данных</h2>
<p>Скачайте следующий пример файла данных METAR на ваш локальный компьютер:</p>
<p><a href="../../../sample-data/A_SAKO31RKSL290000_C_RKSL_20250729000055.txt">A_SAKO31RKSL290000_C_RKSL_20250729000055.txt</a></p>
<p>Затем добавьте этот файл в ваш набор данных, используя MinIO Console. Чтобы получить доступ к MinIO Console, откройте веб-браузер и перейдите по адресу <code>http://YOUR-HOST:9001</code>, затем войдите в систему, используя учетные данные, указанные в файле <code>wis2box.env</code> переменными окружения <code>WIS2BOX_STORAGE_USERNAME</code> и <code>WIS2BOX_STORAGE_PASSWORD</code>.</p>
<p>Чтобы добавить файл в ваш набор данных, перейдите в корзину <strong>wis2box-incoming</strong> и создайте новую папку с именем, соответствующим идентификатору метаданных вашего набора данных. Загрузите пример файла данных METAR в эту папку, используя кнопку «Upload»:</p>
<p><img alt="minio-wis2box-incoming-metar-data-uploaded" src="../../../assets/img/minio-wis2box-incoming-metar-data-uploaded.png" /></p>
<p>Убедитесь, что имя папки совпадает с идентификатором метаданных вашего набора данных, и проверьте, что вы получаете уведомления WIS2 о данных в MQTT Explorer по теме <code>origin/a/wis2/&lt;your-centre-id&gt;/data/recommended/aviation/metar</code>:</p>
<p><img alt="mqtt-explorer-data-aviation-metar" src="../../../assets/img/mqtt-explorer-data-aviation-metar.png" /></p>
<div class="admonition note">
<p class="admonition-title">Устранение неполадок</p>
<p>Если вы не получили уведомление после загрузки данных, вы можете проверить последние логи контейнера <code>wis2box-management</code>, чтобы устранить проблему:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>logs<span class="w"> </span>-n100<span class="w"> </span>wis2box-management
</code></pre></div>
</div>
<p>Скопируйте URL-адрес канонической ссылки из уведомления WIS2 и вставьте его в ваш веб-браузер. URL-адрес должен выглядеть примерно так:</p>
<div class="highlight"><pre><span></span><code>http://example.wis2.training/data/2025-07-29/wis/urn:wmo:md:int-wmo-example:aviation-metar/A_SAKO31RKSL290000_C_RKSL_20250729000055.txt
</code></pre></div>
<p>Если вы правильно добавили токен доступа к набору данных, вы <strong>не</strong> сможете получить доступ к данным в вашем веб-браузере, вместо этого вы увидите ошибку <em>401 Authorization Required</em>.</p>
<h2 id="http-">Добавление токена доступа в HTTP-заголовки для доступа к набору данных</h2>
<p>Чтобы продемонстрировать, что для доступа к набору данных требуется токен доступа, мы воспроизведем ошибку, которую вы видели в браузере, используя команду <code>wget</code>.</p>
<p>Из командной строки в вашей виртуальной машине (VM) выполните команду <code>wget</code> с канонической ссылкой, которую вы скопировали из уведомления WIS2.</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>http://example.wis2.training/data/2025-07-29/wis/urn:wmo:md:int-wmo-example:aviation-metar/A_SAKO31RKSL290000_C_RKSL_20250729000055.txt
</code></pre></div>
<p>Вы должны увидеть, что HTTP-запрос возвращает <em>401 Unauthorized</em>, и данные не загружаются.</p>
<p>Теперь добавьте токен доступа в HTTP-заголовки, чтобы получить доступ к набору данных.</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>--header<span class="o">=</span><span class="s2">&quot;Authorization: Bearer S3cr3tT0k3n&quot;</span><span class="w"> </span>&lt;canonical-link&gt;
</code></pre></div>
<p>Теперь данные должны быть успешно загружены.</p>
<h2 id="_6">Удаление токена доступа из набора данных</h2>
<p>Чтобы удалить токен доступа из набора данных, войдите в контейнер wis2box-management:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>И используйте команду <code>wis2box auth remove-token</code>, чтобы удалить токен доступа из набора данных, указав флаг <code>--metadata-id</code> для идентификатора метаданных набора данных и сам токен в качестве аргумента:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>remove-token<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:my-centre-id:aviation-metar<span class="w"> </span>S3cr3tT0k3n
</code></pre></div>
<p>Убедитесь, что вы заменили <code>urn:wmo:md:my-centre-id:aviation-metar</code> на идентификатор метаданных вашего набора данных.</p>
<p>Выйдите из контейнера wis2box-management:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>И убедитесь, что токен доступа был удален, попробовав снова загрузить данные с помощью <code>wget</code> с токеном доступа в HTTP-заголовках или попытавшись получить доступ к данным через веб-браузер.</p>
<div class="admonition note">
<p class="admonition-title">Контроль доступа является необязательным и применяется только к рекомендованным наборам данных</p>
<p>WIS2 указывает, что к рекомендованным наборам данных <em>может</em> быть применен контроль доступа. Добавление контроля доступа к рекомендованному набору данных не является обязательным, и вы можете полагаться только на URL лицензии, чтобы информировать потребителей данных об условиях использования данных. Если вы применяете контроль доступа, вы несете ответственность за предоставление токена доступа любым потребителям данных, которым требуется доступ к этим данным.</p>
<p>Если вы примените команду <code>wis2box auth add-token</code> к набору данных с политикой данных WMO 'core', то Global Caches сообщат об ошибке в Global Monitoring, так как они не смогут загрузить данные, и ваш набор данных будет считаться <em>несоответствующим</em> техническим правилам WIS2.</p>
</div>
<h2 id="_7">Заключение</h2>
<div class="admonition success">
<p class="admonition-title">Поздравляем!</p>
<p>В ходе этой практической сессии вы научились:</p>
<ul>
<li>создавать новый набор данных с политикой данных 'recommended'</li>
<li>добавлять пользовательский файл лицензии в ваш экземпляр wis2box</li>
<li>добавлять токен доступа к набору данных</li>
<li>проверять, что набор данных недоступен без токена доступа</li>
<li>добавлять токен доступа в HTTP-заголовки для доступа к набору данных</li>
</ul>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/js/disclaimer.js"></script>
      
    
  </body>
</html>